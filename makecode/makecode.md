# Makecode Tutorial

![](media/758709e88f83d841a93103a528cae849.png)


##  Getting Started With Makecode

We take Windows system as example to show you.

Get started with Micro:bit: <Https://microbit.org/guide/quick/>

Step 1: Connect Micro：bit Board

Link micro:bit board to computer with USB cable.（Guide to mobile
apps：<https://microbit.org/get-started/user-guide/mobile/>）

Macs ,PCs, Chromebooks and Linux system（including Raspberry Pi）support
micro：bit.

![](media/f00f946e1f194811b1c84725e0eb5d16.png)
![](media/18c70cf16dcf8c9694a1af8b12530cf9.png)

There will be a MICROBIT drive in your computer, as shown below:

![](media/a2b53f93f4c24b81fc5cdb5986fd100d.png)

Step 2: Programming

We recommend you to use Google Chrome

Enter <https://makecode.microbit.org/> then click
![](media/4858d50ddc80406c44e324c750e902ec.png) and you will view the dialog
box.

Input“heartbeat”to name your project and click“Create”

If you use Windows 10 system, you can also program via Windows 10 App

[https://www.microsoft.com/zh-cn/p/makecode-for-micro-bit/9pjc7sv48lcx?ocid=badgep&rtc=1&activetab=pivot:overviewtab](https://www.microsoft.com/zh-cn/p/makecode-for-micro-bit/9pjc7sv48lcx?ocid=badgep&rtc=1#activetab=pivot:overviewtab)

（we use Google Chrome as a browser）

![](media/397bd09e4c2baf3c933857f3d0d1b83f.png)

![](media/5427d2c4fbb30ffdbce2fe9315244245.png)

Through MakeCode editor, you just need to drag blocks into code editing area to
design program. There is a video to show you how to finish“heartbeat”pattern.

Look through the demonstration video in the link:
<https://fs.keyestudio.com/KS0426>

Next, we will introduce Makecode.

![](media/a6aa8681158ce5b64ffba50c1238f8c8.png)

Click “JS JavaScript”to find corresponding programming language, as shown below;

![](media/fee96f8308779a8a6f8648139b0b117b.png)

You can also click “JS JavaScript”to choose “Python”to find corresponding Python
language, as shown below;

![](media/12c11bc57b36eb82853784c645b9830a.png)

Step 3: Download Code

If your computer is Windows 10 and you have downloaded the APP MakeCode for
micro:bit to write program, what you will have to do to download the program to
your Micro: Bit main board V2 is merely clicking the ‘Download’ button, then all
is done.

If you are writing programs through the website, following these steps:

Enter Makecode editor, tap“Download”to get a“hex”file. Then copy it into
MICROBIT drive.

![](media/a81d4430eb152346d13bf67b2233b9db.png)

![](media/fe0f2de72ba0b38f00403f1aaef7f514.png)

Get“hex”file firstly, drag or copy it in MICROBIT drive.

Then hex file will be copied on MICROBIT drive.

![](media/b4f3602c0e192646f77b150e2acaf947.png)

When the hex file is being copied, indicator on micro:bit will flash; after it
is copied, the indicator will keep on.

Step 4: Run program

After the program is uploaded to the Micro: Bit main board V2, you could still
power it via the USB cable or change to via an external power. The 5 x 5 LED dot
matrix on the board displays the heartbeat pattern.

![](media/672bfb4d87b938fc586a849bff0229fe.png)
![](media/d61a26d2f2367f0378974832f679efe1.png)

micro USB cable external power（3V）

Step 5：other programming languages

This chapter has described how to use the Micro: Bit main board V2.

But except for the Makecode graphical programming introduced you can also write
Micro: Bit programs in other languages. Go to the link:
<https://microbit.org/code/> to know about other programming languages , or view
the link: <https://microbit.org/projects/>, to find something you want to have a
go.

### 5.1 Makecode

Browse <https://makecode.microbit.org/> and enter Makecode online editor.

![](media/306e32b77a5dae6927b5dd0f6cf6f4f4.png)

Click“New Project”, and input“heartbeat”，then enter Makecode editor, as shown
below:

![](media/c5d52e632549cae8e23944f8febe5a03.png)

![](media/c5d52e632549cae8e23944f8febe5a03.png)

There are block“on start”and“forever”in the code editing area.

After power on or reset, “on start”means that command blocks in the code are
only executed once, however,“forever”implies that code runs cyclically.

### 5.2 Quick Download

As mentioned before, if your computer is Windows 10 and you have downloaded the
APP MakeCode for micro:bit to write programs, the program written can be quickly
downloaded to the Micro: Bit main board V2 by selecting ‘Download’.

While it is a little more trickier if you are using a browser to enter makecode.
However, if you use Google Chrome, suitable for Linux，macOS and Windows 10, the
process can be quicker too.

We use the webUSB function of Chrome to allow the internet page to access the
hardware device connected USB.

You could refer to the following steps to connect and pair devices.

Connect to computer by USB cable. Click“...”beside“Download”and click“Pair
device”.

![](media/67061196ab9c8a7fd910ecc918729b0f.png)

Continue to tap“Pair device”

![](media/0ffb7eb2548a11eab42ce54b86529dbe.png)

Then select the device you want to connect and“connect”in the window popping up

If there is no device in the window, please refer the following link:

[https://makecode.microbit.org/device/usb/webusb/troubleshoot](https://makecode.microbit.org/device/usb/webusb/troubleshoot%20)

We also provide ![](media/272a3d889f21d424423dfeb91ddbd91a.png)in the resource
link.

What’s more, if you don’t know how to update the firmware of micro:bit, refer
the link:
[https://microbit.org/guide/firmware/](https://microbit.org/guide/firmware/%20)
or browse ![](media/7f716a3d233701cca5ebe985e63222a2.png)we provide.

![](media/79c7ba65a4537c456f6af6e437daa4f2.png)

After connecting successfully, press buttons and download program to micro:bit
board.

![](media/ce919e72cca0b62ceaac7c86bda98499.png)

### 5.3 How to Import Makecode Extension Library

Next, we need to import K-bit extension library for using in further lessons.

**For simple projects, you can drag blocks to edit the program.**

**For complex ones, you just drag the code we provide to online Makecode**

Add a Kit-bit extension library

Enter Makecode and click ![](media/d55ed7f8c4d691d71a6e56edb264a0d6.png)icon and
tap ![](media/d2a9b25f7eb67c6bc389fc79e252d6ea.png)

![](media/c34174c17046360452a25d036815a987.png)

Copy <https://github.com/mworkfun/pxt-k-bit.git> in the searching box and search
k-bit library.

![](media/6dd3bf2eb92839c07826492072e319aa.png)

You can also select below extension library to import them directly.

![](media/fee2d1bcda1f89f5d93b2b3dcc575860.png)

“K-bit”extension library will appear in the page, click it to install and you
need to wait for a while.

![](media/fee0ab32d4b05e5153a487928f138714.png)

After installation, you can view K-bit extension library in the Makecode Blocks.

![](media/d1c59b7362cb1b0e9a3da7dc87631063.png)

![](media/1043d3074a009a7dd90105d8c3a7156f.png)

**Note: the added extension library is only valid to one project, therefore, it
won’t appear in other projects.**

**You need to add the K-bit extension library again when creating new
projects.**

Update or Delete K-bit Extension Library

Refer to the following instruction please, if you intend to update or delete
K-bit extension library.

Click "Js JavaScript" button to switch into text code

![](media/7e92de2870c7bb57fdf597b5a891ff53.png)

Click“Explorer”to get extension library .

![](media/b04df62ff4a1b941d130ca53c6b723c2.png)

Click“![](media/ba4968271653f5f45f56008e830a7485.png)”to delete k-bit extension
program(K_Bit, IrRemote and Neopixel), next to
tap“![](media/0831eb76654a6b39fc6d698ee7c872b9.png)”to update k-bit extension
program.

![](media/62e3d5377618c75ef36fa5ad2991351c.png)

### 5.4 Resources and Code

Download resources and code of tool package: <https://fs.keyestudio.com/KS0426>

After the tool package is downloaded and unzipped, a file named KS0426 Microbit
Mini Smart Robot Car V2 will be generated. It can be placed everywhere.

### 5.5 Import Code

We provide every program with hex file. You could import it directly or program
in Makecode blocks area, therefore, the extension library must be added.[(How to
add extension?)](#M11)

For simple projects, dragging a block of code to complete the program is
recommended. For complex projects, it is recommended to conduct the program by
importing the hexadecimal code file we provide.

Next, we will take“heartbeat”as example to introduce how to import code

Open Makecode online editor on your computer

![](media/ebc8f179f28ab520bc63944361d64d64.png)

Click“Import”and“Import files”

![](media/3358909f898dd9898923f72945613851.png)

![](media/c9fdc9d4e4977eeade060391109a6061.png)

Choose file“ ../Makecode Code/6.1：heartbeat/microbit-heartbeat.hex”, then
tap“Go ahead”

![](media/720a3823be2d3915a42159483b4b90eb.jpeg)

![](media/47fca88531361c16bbd54d0802d7fc5a.png)

In addition to the above method of importing the provided project code program
files directly into the Makecode compiler, you can also drag the provided
project code program files directly into the Makecode compiler, as shown in the
figure below:

![](media/73930634da71321517a3d6345bab3f2c.png)

The program is imported successfully after seconds

![](media/27fca1318f34337369c90f6f0e12369b.png)

Note: device pairing can’t be completed in the Google Chrome if the system is
Windows7/8, that is, the corresponding digital or analog signals can’t be read.

However, don’t worry about this issue, there is a CoolTerm software to read
digital or analog signals. For the whole projects, we will use CoolTerm
software.

Let’s install it firstly.

### 5.6 CoolTerm Installation

CoolTerm program is used to read the serial communication.

Download CoolTerm program:

<https://freeware.the-meiers.org/>

1.  After the download, we need to install CoolTerm program file, the Window
    system is taken as an example.

2.  Choose“win”

3.  Unzip file and open it. (also suitable for Mac and Linux system)

![](media/97f831d38df9ee01dcfedac244bfe281.png)

![](media/e77548d01727e523e9e8c900d2fa962d.png)

1.  Double-click ![](media/5f29eed25fc16602cfc0716f047c2da1.png)

![](media/74fd81c83f0c0a26b4e299b93ce4ede4.png)

The functions of each button on the Toolbar are listed below:
<http://wiki.keyestudio.com/index.php/File:IDE.png>

![](media/70bebd79d7cd20336ae394c916500a28.png)

| ![](media/2b728375ed2b8cd288c884e553418001.png)        | Opens up a new Terminal                           |
|--------------------------------------------------------|---------------------------------------------------|
| ![](media/5f972f2eac5050ca0107416b2be067c2.png)        | Opens a saved Connection                          |
| ![](media/be6f8b560e0afc447f9c32b4474f633f.png)        |  Saves the current Connection to disk             |
| ![](media/52257d028694a313fc4eea4d9c2469d7.png) | Opens the Serial Connection                       |
| ![](media/6ad366842b18084553a142ab82a613cf.png) | Closes the Serial Connection                      |
| ![](media/8fa3ac342549d33b6c9aa5a9e4688bea.png) | Clears the Received Data                          |
| ![](media/c8d1dd8c3356b4938e143de1022e5842.png) | Opens the Connection Options Dialog               |
| ![](media/36e13c266fd4b9723d9db40fe30cd203.png) | Displays the Terminal Data in Hexadecimal Format  |
| ![](media/b505c71c3344036730b1d67f0c62a354.png)        | Displays the Help Window                          |

##  Projects

The projects from 6.1 to 6.12 are the introduction of LED matrix and built-in
sensors on the micro:bit board

### 1: Heartbeat

1.  **Description：**

Prepare a Micro:bit board and USB cable. Next we will conduct a basic experiment
that a heartbeat pattern flashes on micro:bit board.

**2. What You Need**

1.  Connect micro:bit to computer with USB cable

2.  Open online Makecode editor

**Import Hex profile** [**(How to import?)** ](#_7.6.导入代码)

**Or click“New Project”and drag blocks step by step**

![](media/b14ace883d757d0dffb2adae9a035aaa.png)

**3. Test Code：**

Import hex file.

| File Type | Route                            | File Name               |
|-----------|----------------------------------|-------------------------|
| Hex file  | ../Makecode Code/6.1：Heart beat | microbit-Heart beat.hex |

Or you could edit code step by step in the editing area.

1.  Go to“Basic”→“show icon”.

2.  Copy it again and place into“forever”block.

3.  Click“❤”to select“![](media/04fdfc9060943954e7938bb1a741d626.png)”.

![](media/7b7e9577c6993f443060015e141f9189.png)

Complete Program：

![](media/04fdfc9060943954e7938bb1a741d626.png)


Click“JavaScript" to view the corresponding JavaScript code:

![](media/00e2115f7e171c91af90f27889395dde.png)

**4. Test Results:**

Download code on micro:bit and plug in it by USB cable. The LED dot matrix will
display ![](media/14472c7e1c80818889bb47bfc709f053.png) and
![](media/04fdfc9060943954e7938bb1a741d626.png)

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

If download unsuccessfully, disconnect micro:bit and reboot it

### 2: Light Up A Single LED

![](media/8c3f540a07aab97e1608ba8770837f7b.png)

1.  **Description：**

Micro:bit motherboard consists of 25 light-emitting diodes, 5 pcs in a group.
They correspond to x and y axis. Then the 5\*5 matrix is formed. Moreover, every
diode locates at the point of x and y axis.

Virtually, we could control an LED by setting coordinate points. For instance,
set coordinate point（0，0）to turn on the LED at row 1 and column 1; light up
LED at the row 1 and column 3, we could set （2，0) and so on.

![](media/41c834c1592b4ecbec3066082c25f10b.png)

**2. What You Need**

(1) Connect micro:bit to computer with USB cable

(2) Open online Makecode editor

**Import Hex profile** [**(How to import?)** ](#_7.6.导入代码)

**Or click “New Project”and drag blocks step by step**

**3. Test Code：**

Import hex file.

| File Type | Route                                        | File Name                       |
|-----------|----------------------------------------------|---------------------------------|
| Hex file  | ../Makecode Code/6.2: Light up a single LED  | microbit- Light up a single LED |

Or you could edit code step by step in the editing area.

1.  A. Click“Led”→“more”→“led enable false”

B. Put it into the“on start”block, click the drop-down triangle button to
select“true”.![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2) A. Enter“Led”→“toggle x 0 y 0”block;

B. Combine it with“forever”，alter“x 0”into“x 1”.

![](media/70e6ac6cc25d9f0f313c670383c718dd.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3) A. Enter“Basic”→“pause (ms) 100”from“

B. Then move it below the“toggle x1 y0”block, and set to
500ms.![](media/b3cf902a00a442590d9e81b3d963b856.png)

(4) Duplicate code string![](media/a19713fcfe99bbdc3b7d2448e42d3b47.png)once and
place it into“forever”block.![](media/6fa24a7c1348d775f70f3c3e65294091.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  A. Enter“Led”→“plot x 0 y 0”

B. Keep it beneath block“pause(ms)500”, then set to“plot x 3 y
4”.![](media/2d573bedbe650cae075dea31bfd509a4.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Replicate“pause (ms) 500”once and keep it below the block“plot x3y4”

![](media/14aa140cf450499f11035dc8313bd83c.png)

1.  

2.  Click“Led”→“unplot x 0 y 0”and set to“unplot x3 y 4”;

3.  Lay down it beneath“pause (ms) 500”block

4.  Copy“pause (ms) 500”block once, and keep it below the“unplot x3 y
    4”block.![](media/523b04d16b1e2755b488b05a82c6da71.png)

![](media/f19c365efafd84e76d058e97f7a6c50f.png)

**Complete Program：**

Click“JavaScript”to check the corresponding JavaScript code:
![](media/472b93b10b3d00bef040ae15892f9c5d.png)

**4. Test Result：**

Upload program and plug in micro:bit via USB port, the LED at coordinate point
(1,0) flashes for 0.5s, then the LED at (3,4）blinks for 0.5s, alternately.

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

### 3: 5 x 5 LED Dot Matrix

![](media/8c3f540a07aab97e1608ba8770837f7b.png)

1.  **Description：**

Dot matrix gains popularity in our life, such as LED screen, bus station and the
mini TV in the lift.

The dot matrix of Micro:bit board consists of 25 light emitting diodes. In
previous lesson, we control LED of Micro:bit board to form patterns, numbers and
character strings by setting the coordinate points. Moreover, we could adopt
another way to complete the display of patterns, numbers and character strings.

**2. What You Need**

(1) Connect micro:bit to computer with USB cable

(2) Open online Makecode editor

**Import Hex profile** [**(How to import?)** ](#_7.6.导入代码)**, or click“New
Project”and drag blocks step by step**

**3. Test Code：**

Import hex file.

**Code 1：**

Hex File:

| File Type | Route                                             | File Name           |
|-----------|---------------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.3：5 x 5 LED dot matrix/Code-1 | microbit-Code-1.hex |

Or you could edit code step by step in the editing area.

1.  A. Enter“Led”→“more”→“led enable false”

2.  Click the drop-down triangle button to select“true”
    ![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png)

3.  Combine it with“on start”block

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Led”to move“plot x 0 y 0”into“forever”, then replicate“plot x 0 y
    0”for 8 times, respectively set to“x 2”y 0”,“x 2”y 1”,“x 2”y 2”,“x 2”y 3”,“x
    2”y 4”,“x 1”y 3”“x 0”y 2”,“x 3”y 3”,“x 4”y 2”.

![](media/d44a44c5708aa9ea67a70220d3afde02.png)

Complete Program：

![](media/d44a44c5708aa9ea67a70220d3afde02.png)

Click“JavaScript" to access the corresponding JavaScript code:
![](media/2456980fec90ec5086f078165471889f.png)

**Code 2：**

Hex File:

| File Type | Route                                                 | File Name            |
|-----------|-------------------------------------------------------|----------------------|
| Hex file  | ../Makecode Code/6.3：5 x 5 LED dot matrix/Code-2.hex | microbit-Code -2.hex |

1.  A. Enter“Basic”→“show number 0”block,

2.  Duplicate it for 4 times, then separately set to“show number 1”,“show number
    2”,“show number 3”,“show number 4”,“show number 5”.

![](media/5b8bc5bbc3f5e84aeb19d4dc7d7d2ffd.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Basic”→“show leds”, then put it into“forever”block，tick blue boxes to
    light LED and generate“↓”pattern.

    ![](media/9c1ecc0a6db98f37533c9deec935b717.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Move out the block“show string” from“Basic”block, and leave it beneath
    the“show leds” block

    ![](media/3f638ac0f3f088a2adefa1ad17cea38a.png)

Choose“show icon” from“Basic”block, and leave it beneath the block“show
string“Hello!”block

![](media/e989a69cc6fea0a3faa6c1f491b40e69.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  A. Enter“Basic”→“show arrow North”;

B. Leave it into“forever”block，replicate“show arrow North”for 3
times，respectively set to“North East”, “South East”, “South West”,“North West”.

![](media/008c4281fabc99c159c52fcf4ab28bf2.png)

1.  Click“Basic”to get block“clear screen”then remain it below the block “show
    arrow North West”

![](media/94182fcc1ee9e1998ef16b2925ea082b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Drag“pause (ms) 100”block from“Basic”block and set to 500ms, then leave it
    below“clear screen”block.

![](media/e782704754471e5db06937017e5022d0.png)

Complete Program:

![](media/20fed03d66e92ef565333d6f060b1267.png)

Click“JavaScript" to check the corresponding JavaScript code:

![](media/956160489ca3235150db0fc00402ba77.png)

1.  **Test Result：**

Upload code 1 and plug in micro:bit via USB cable , we will see the
![](media/d4e278da768e447ed344d581e671f57a.png) icon.

Upload code 2 and plug in micro:bit via USB cable. Micro: bit starts showing
number 1, 2, 3, 4, and 5, then cyclically
display![](media/d4e278da768e447ed344d581e671f57a.png),“Hello!”,
![](media/66b31365d42274ef94ce9a3fcea1cd6c.png),
![](media/39fe4029acb5fb675d875c58e382d148.png),
![](media/45fcde65eb80a942d3903e400a346587.png),
![](media/9e34fdb19d72918bde242994a3c94c1f.png) and
![](media/2a45fca9d836ce38674c347c70c81e02.png)patterns.

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

### 4: Programmable Buttons

![](media/06be84fb11b1fd07cd0cbb392132b903.png)

1.  **Description：**

The button can control the on and off of the circuit. The button is attached to
the circuit. The circuit is disconnected when the button is not pressed. The
circuit is connected as soon as it is pressed, but it is disconnected after
being released.

Both ends of button are like two mountains. There is a river in between.

The internal metal piece connect the two sides to let the current pass, just
like building a bridge to connect the two mountains.

Micro:bit board has three buttons, the reset button on the back and two
programmable buttons on the front. By pressing these buttons, the corresponding
characters will be displayed on dot matrix.

**2. What You Need**

1.  Connect micro:bit to computer with USB cable

2.  Open online Makecode editor

**Import Hex profile**[**(How to import?)** ](#_7.6.导入代码)**, or click“New
Project”and drag blocks step by step.**

**3. Test Code：**

**Code 1：**

As we press the button on micro：bit board，LED dot matrix displays character
strings.

Import hex profile

| File Type | Route                                            | File Name           |
|-----------|--------------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.4：Programming Buttons/Code-1 | microbit-Code-1.hex |

You could edit code step by step in the editing area.

1.  A. Click“Basic”→“show string”;

B. Then place it into“on button A pressed”block,
change“Hello!”into“A”.![](media/aebeefcca33e544db91944881f0a9a68.png)

1.  Copy code string![](media/aebeefcca33e544db91944881f0a9a68.png)once, tap the
    drop-down button“A”to select“B”and modify
    character“A”into“B”.![](media/6c6bcb6bbeaf8ed55b985e44fc734d61.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Copy![](media/aebeefcca33e544db91944881f0a9a68.png)once，and set to“on
    button A+B pressed”and“show string“AB”

![](media/3e8bde170db9e02e9cee36b3ede184b7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Complete Code:

![](media/1ad59546b238e9644160019cdb102ee4.png)

Click“JavaScript", and you will view the corresponding JavaScript code:

![](media/50c59105d5a2409eea809e6ce73cf740.png)

**Code 2：**

Upload code 2 and plug in board. Press button A, a row of LEDs are added and
light up, when B is pressed, a row of LEDs are deducted and go off.

Hex File:

| File Type | Route                                            | File Name           |
|-----------|--------------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.4：Programming Buttons/Code-2 | microbit-Code-2.hex |

You could edit code step by step in the editing area.

1.  A. Click“Led”→“more”→“led enable false”,

B. Put it into the block“on start”，click drop-down triangle button to
select“true” ![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png).

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  A. Tap“Variables”→“Make a Variable...”→“New variable name：”

B. Enter“item”in the dialog box and click“OK”，then variable“item”is produced.
And move“set item to 0”into“on start”block

![](media/a4d4a625424427a8f2d628db1f9417ae.png)

1.  A. Click“Input”→“on button A pressed”.

B. Go to“Variables”→“ change item by 1 ”

C. Place it into“on button A pressed”and 1 is modified into
5.![](media/81ec128a3a4bb86fed7d2f78bab20447.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Duplicate![](media/81ec128a3a4bb86fed7d2f78bab20447.png)code string
    once，click the drop-down button to select“B”，then set“change item by
    \-5”.![](media/a53f0e6deb299ba15c494547dec19259.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  A. Enter“Led”→“plot bar graph of 0 up to 0”

B. Keep it into“forever”block

C. Go to“Variables”to move“item”into 0 box，change 0 into 25.

![](media/3232608700bf086dd0474de156a9116d.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  A. Go to“Logic”to move out “if...true...then...”and “=”blocks，

B. Keep“=”into“true”box and set to “\>”

C. Select“item”in the“Variables”and lay it down at left box of “\>”，change 0
into 25；

D. Enter“Variables”to drag“set item to 0”block into“if...true..then...”, alter 0
into 25.

![](media/75a22c2c7eaf03a6d0ffaadf1d9f2fe9.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(7) A. Replicate code string![](media/e0de4c7488b48605b292df5d3dd798dc.png)once

B.“\>”is modified into“\<”and 25 is changed into 0,

C. Leave it beneath ![](media/e0de4c7488b48605b292df5d3dd798dc.png)code string.

![](media/678059d480a41d372a6b70175b5a3225.png)

Complete Program：

![](media/e2d7143ce59218e14780e9370d973c51.png)

Click“JavaScript" to switch into JavaScript code:

![](media/21704f7ef37d6ed440545c28dbd93211.png)

1.  **Test Result：**

Upload code 1 and plug in micro:bit via USB cable, press“A”on Micro:bit board,
character“A”will be displayed；in case that B is pressed，letter“B”will appear.
So will show“AB”if you press A and B buttons simultaneously.

Upload code 2 and plug in board via USB cable. Press button A, a row of LEDs are
added, when B is pressed, a row of LEDs are deducted.

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

### 5: Temperature Measurement

1.  **Description：**

Micro:bit main board doesn’t come with temperature sensor actually, but detect
temperature through built-in temperature of nRF52833 chip. Thereby, the detected
temperature is more close to chip’s temperature.

**Note: the temperature sensor of Micro:bit main board is shown below:**

![](media/206c8ec1c3f11d2de8d0f42fdf5b6b47.png)

**2. What You Need**

(1) Connect micro:bit to computer with USB cable

(2) Open online Makecode editor

**Import Hex profile**[**(How to import?)** ](#_7.6.导入代码)**, or click“New
Project”and drag blocks step by step**

**3. Test Code：**

**Code 1：**

Micro:bit detects temperature

Import hex file.

| File Type | Route                                                 | File Name           |
|-----------|-------------------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.5：Temperature Measurement /Code-1 | microbit-Code-1.hex |

Or you could edit code step by step in the editing area.

1.  Go to“Advanced” →“Serial” →“serial redirect to USB”

Place it into “on start”

![](media/07637ee0425802f6a59eb6f6dd62ea5c.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Serial”to drag out“serial write value x=0”

2.  Move it into“forever”block

    ![](media/0e709be8f6acc9521f1f76a0fc32c792.png)

1.  Go to“Input” →“temperature(℃)”

Place it into 0 box

Change x into Temperature

![](media/2143a993b073f763a2e770a7eea628d6.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Move “pause (ms) 100”from“Basic” block and place it under block“serial
    write.....temperature(℃)”

![](media/0c03bc986e186751ac33b92e5052b26f.png)

Complete Program：

![](media/e1e316ab2c9727c9b5a36dd82a7ab11a.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/0cb83e9f83fa0fd0344685f38913cb43.png)

Download code 1 to micro:bit board and keep USB cable connected, then tap button
![](media/e0580d7886af95d2a4ea7cd9d40759ff.png):

( [How to quick download?](#_7.3.快速下载))

![](media/0d3198e0cb5460c9820bc2f016c0d7c1.png)

Temperature data is shown below:

![](media/6177222069a9583f2d8314d592fdb916.png)

Through the test, the room temperature is 35℃ when touching the nRF52833 chip of
micro:bit; however, the temperature rise to 37℃ when it touches water cup.

Open CoolTerm, click Options to select SerialPort. Set COM port and 115200 baud
rate(the baud rate of USB serial communication of Micro:bit is 115200 through
the test). Click“OK”and“Connect”.

The serial monitor shows the current ambient temperature value, as shown below:

![](media/b3a18bca1b2a7b5337470735e5a0c5aa.png)

![](media/f78128c148de3862a3fe10d86f063e22.png)

![](media/13238e98c31d620f4ffd7742dd71c78d.png)

![](media/9c88bb875124738a55e5e0fd5bf957ca.png)

**Code 2：**

Control micro:bit to display different patterns via temperature**(Note: the
temperature value in the code can be adjusted)**

Hex File:

| File Type | Route                                                 | File Name            |
|-----------|-------------------------------------------------------|----------------------|
| Hex file  | ../Makecode Code/6.5：Temperature Measurement /Code-2 | microbit-/Code-2.hex |

You could set temperature based on real situation.

1.  Click“Led”→“more”→“led enable false”into“on start”，click drop-down triangle
    button to select“true” ![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  A. Go to“Logic”→“if..true...then...else”and “=” block;

B. Move“if..true...then...else” into“forever”block，then place“=”into“true”box.

![](media/28c4cf38fbacb05ca0e457146767757d.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  A. Change “=” into“≥”

B. Go to“Input”→“temperature(℃)”and move it into left 0 box;

C. Change 0 into 35.

![](media/2b0e3775540415849bf36f7d118a8599.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Tap“Basic”→“show icon”，copy it once and lay down them under the“if ...then”
    and else blocks, then click the drop-down triangle button to
    select“![](media/9fa58029eb504582ee5a915f591ea583.png)”.
    ![](media/fee3bbacccaebb856bbf2cbbe95a82bf.png)

Complete Program：

![](media/9fa58029eb504582ee5a915f591ea583.png)

Click“JavaScript", the corresponding JavaScript code is shown below:

![](media/9424f8456bb544ca25a7c5a4ea6e852c.png)

1.  **Test Result：**

Upload the Code 1 and plug in power. And 5\*5LED displays the ambient
temperature. When pressing the temperature sensor, the temperature will grow on
dot matrix.

Upload the code 2 plug in micro:bit via USB cable, when the ambient temperature
is less than 35℃, 5\*5LED will
show![](media/4b1765e12b413dc5d562f2a16d32392f.png). When the temperature is
equivalent to or greater than 35℃, the
pattern![](media/f2705fbc4886efcfaac96589ca255f66.png) will appear.

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

### 6: Micro:bit’s Compass

![](media/24c31bb0174e2ac672203e5c36c6875e.png)

**1. Description：**

This project aims to explain the use of the Micro: bit geomagnetic sensor, which
can not only detect the strength of the geomagnetic field, but also be used as a
compass to find bearings. It is also an important part of the navigation
attitude reference system (AHRS). Micro: Bit main board V2 uses LSM303AGR
geomagnetic sensor, and the dynamic range of magnetic field is ±50 gauss. In the
board, the magnetometer module is used in both magnetic detection and compass.
In this experiment, the compass will be introduced first, and then the original
data of the magnetometer will be checked.The main component of a common compass
is a magnetic needle, which can be rotated by the geomagnetic field and point
toward the geomagnetic North Pole (which is near the geographic South Pole) to
determine direction.

Then we could read the value detected by it to determine the location. We need
to calibrate the Micro:bit board when the magnetic sensor works.

The correct calibration method is to rotate the Micro:bit board.

In addition, the objects nearby may affect the accuracy of readings and
calibration.

**2. What You Need**

(1) Connect micro:bit to computer with USB cable

(2) Open online Makecode editor

**Import Hex profile**[**(How to import?)** ](#_7.6.导入代码)**, or click“New
Project”and drag blocks step by step.**

**3. Test Code：**

**Code 1：**

The micro:bit board shows the value of magnetic sensor when pressing A

Hex File:

Import hex file

| File Type | Route                                            | File Name           |
|-----------|--------------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.6：micro:bit’s compass/Code-1 | microbit-Code-1.hex |

Or you could edit code step by step in the editing area.

1.  A. Click“Input”→“more”→“calibrate compass”

B. Lay down it into block“on start”.

![](media/f0973c3116eb4faf2d4ca138bd057d45.png)

1.  A. Go to“Input”→“on button A pressed”.

B. Enter“Basic”→“show number”, put it into“on button A pressed”block;

C. Tap“Input”→“compass heading(℃)”， and place it into“show number”

![](media/0d9b5a65740d9406848d9a360635982b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

![](media/3dac0d4c18fe1334cb76de8a87bf150c.png)Complete Program：

![](media/3dac0d4c18fe1334cb76de8a87bf150c.png)

![](media/3dac0d4c18fe1334cb76de8a87bf150c.png)Click“JavaScript",
and view the corresponding JavaScript code:

![](media/a3fa9018b3e83be04515297b5fd94b42.png)

**Code Description：**

Upload the code 1, plug in micro:bit via USB cable and press button A. LED dot
matrix indicates that“TILT TO FILL SCREEN”. Then enter the calibration
interface, the calibration method is: rotate the Micro:bit motherboard to make
the screen (LED dot matrix) draw a square (25 LEDs are on), as shown in the
following figure:

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

![](media/acf3b8c0dee027d9e555fc708831f874.jpeg)

The calibration is finished until you view the smile
pattern![](media/a4faf86fb027b2f4c3dacaeee5d47d2b.png)appear.

The serial monitor show will 0°, 90°, 180°and 270° when pressing A.

**Code 2：**

Make micro: bit board point to the north, south, east and west horizontally ,
LED dot matrix displays the corresponding direction patterns

| File Type | Route                                            | File Name           |
|-----------|--------------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.6：Micro:bit’s compass/Code-2 | microbit-Code-2.hex |

![](media/66c4482e3bcd71e712a54f4d73044104.png)

This code string complies that we read the value detected incessantly and
determine the direction by the value range. The direction is toward North at
this time.

1.  

2.  Enter“Input”→ “more”→“calibrate compass”

3.  Move“calibrate compass”into“on start”

![](media/f0973c3116eb4faf2d4ca138bd057d45.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  A. Click“Variables”→“Make a Variable...”→“New variable name：”

B. Input“x”in the blank box and click“OK”, and the variable“x” is generated.

C. Drag out“set x to”into“forever”block

![](media/0ecd067449d3d52ce3ba751632129b54.png)

1.  A. Go to“Input”→“compass heading(℃)”, and keep it into “0” box

![](media/a97f7ff675fc62533a9053b6c415652b.png)

1.  Tap“Logic”→“if...then...else”, leave it below block“sex x to compass
    heading”，then click![](media/bf972b006ad6d05686352c4785e54994.png)icon for
    6 times.

1.  A. Place“and”into “true” block

B. Then move“=”block to the left box of “and”

C. Click“Variables”to drag“x”to the left“0”box, change 0 into 293 and set to“≥”;

D. Then copy“x≥293”once and leave it to the right“0”box and set to“x\<338”

![](media/cf2d8d1d74b5f485abd4843f92b52672.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  A. Go to“Basic”→“show leds”

B. Lay it down beneath ![](media/6dbd99f5a6e4abe8ffd450d19b8a857b.png)block,
then click“show leds”and the pattern
![](media/eab025b80ef24f1d5351bd3e06221bad.png)appears.

![](media/fe40fd39ae6abce0721d19cf86ef136d.png)

1.  A. Duplicate ![](media/6dbd99f5a6e4abe8ffd450d19b8a857b.png)for 6 times.

B. Separately leave them into the blank boxes behind“else if”.

C. Set to“x≥23 and x\<68 ”,“x≥68 and x\<113 ”,“x≥113 and x\<158 ”,“x≥158 and
x\<203 ”,“x≥203 and x\<248”,“x≥248 and x\<293 ”respectively.

D. Then copy“show leds”for 7 times and keep them below the“else if.......then”
block respectively.

E. Click the blue boxes to form the
pattern“![](media/4c73992fa4dfc6a2735b49ea8f000ed6.png)”,
“![](media/0771b8fd797a3e945a01ec1525ba4a9d.png)”,
“![](media/41eb716a282d52483e8467704613d034.png)”,
“![](media/2cae18294b329c10ecdefd768d6954e0.png)”,
“![](media/14b893d1a7157d72209b975d0df8d890.png)”,
“![](media/3977e13fdec2bfbc7fc55f5dce4969a9.png)”.

Complete Program：

![](media/41eb716a282d52483e8467704613d034.png)pattern appears

![](media/c362406f55115926523a0f60e16828b6.png) When x is not among the above rang, the next program will be executed under else block

Click“JavaScript", you will view the corresponding JavaScript code:
![](media/7140a86db633ec1bb6ec7e07a109a0dc.png)

![](media/1d4fdac44bf4e1629145fac97f627c24.png)

1.  **Test Result：**

Upload code 2 and keep USB cable connected. After calibration, tilt Micro:bit
board, the LED dot matrix displays the direction signs

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

### 7: Accelerometer

![](media/24c31bb0174e2ac672203e5c36c6875e.png)

**1. Description：**

The Micro: Bit main board V2 has a built-in LSM303AGR gravity acceleration
sensor, also known as accelerometer, with a resolution of 8/10/12 bits. The code
section sets the range to 1g, 2g, 4g, and 8g.

We often use accelerometer to detect the status of machines.

In this project, we will introduce how to measure the position of the board with
the accelerometer. And then have a look at the original three-axis data output
by the accelerometer.

**2. What You Need**

(1) Connect micro:bit to computer with USB cable

(2) Open online Makecode editor

**Import Hex profile** [**(How to import?)** ](#_7.6.导入代码)**, or click“New
Project”and drag blocks step by step**

**3. Test Code：**

**Code 1：**

Control micro: bit board to make LED dot matrix will show different numbers.

Import hex file

| File Type | Route                                      | File Name           |
|-----------|--------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.7：Accelerometer/Code-1 | microbit-Code-1.hex |

Or you could edit code step by step in the editing area.

(1) A. Enter“Input”→“on shake”，

B. Click“Basic”→“show number”, place it into“on shake”block, then change 0 into
1.![](media/b86b68744e64e4e9907ccb1fa0cb2af7.png)

(2) A. Copy code string ![](media/b86b68744e64e4e9907ccb1fa0cb2af7.png)for 7
times;

1.  separately click the triangle button to select“logo up”,“logo down”,“screen
    up”,“screen down”,“tilt left”,“tilt right”and“free fall”, then respectively
    change 1 into 2, 3, 4, 5, 6, 7, 8.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Complete Program：

![](media/75e625fbae54fd3d76cf6c4967d87415.png)

![](media/3fc45754cb7a060d660212c5cb8c268f.png)

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/ffd55d004aee7f100e1a2608c90f1c7c.png)

**Code 2：**

Check the acceleration value at X, Y and Z axis.

| Hex File:File Type | Route                                      | File Name           |
|--------------------|--------------------------------------------|---------------------|
| Hex file           | ../Makecode Code/6.7：Accelerometer/Code-2 | microbit-Code-2.hex |

1.  A. Go to“Advanced”→“Serial”→“serial redirect to USB”

B. Drag it into“on start”

![](media/8c0cfdd76322ebf7febafa519e98b76f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  A. Enter“Serial”→“serial write value x =0”

B. Leave it into“forever”block

![](media/1dcff6f8c61c0c7ac220ded584bcf988.png)

1.  \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
    A. Click“Input”→“acceleration(mg) x”；

B. Keep it into“0”box and capitalize the“x”

![](media/3f132064ad2081eabf6269eb4c0e698b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Basic”and move out“pause (ms) 100”below the
    block![](media/aa23874d61a27c3af5263746851f6fef.png), then set to 100ms.

    ![](media/98c688ae175b0c5eca6bed1d95f7b301.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Replicate code string![](media/c013533f2e3a02f26116f176ba6f975b.png)

for 3 times and keep them into“forever”block，separately set the whole code
string as follows:

![](media/e11b467aef3999050e8a3b5cd175dce9.png)

Complete Program：

![](media/57fec5e7a6bda76b8ddc6c3538b58010.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/381a6d80fa940cb21ad6963469eef351.png)

Download code 1 to micro:bit board, keep USB cable connected and
click![](media/e310a9105faecbe6ed8400101a4e852d.png)

([How to quick download?](#_7.3.快速下载))

![](media/821a64a53c3a9709ff556e71b070f4dd.png)

The coordinates of the Micro:bit accelerometer are shown in the following
figure:

![](media/6303a0ac122680207fe856d9be38d01c.png)

The decomposition of acceleration on the X-axis, Y-axis, and Z-axis, as well as
the synthesis of acceleration (the synthesis of gravitational acceleration and
other external forces). Then flip the micro:bit board, the data is shown below:

![](media/ded4e05f2b15d694e2061159628574dc.png)

1.  **Test Results：**

Uploading the test code 1 to micro:bit main board V2 and powering the board via
the USB cable, if we shake the Micro: Bit main board V2. no matter at any
direction, the LED dot matrix displays the digit “1”.

When it is kept upright （its logo above the LED dot matrix）, the number 2 will
show.

![](media/1600323e3e61e331c248cbeda5ccdcfc.jpeg)

When it is kept upside down( its logo below the LED dot matrix) , it will show
as below.

![](media/3be80acf957e53117f695801ce19c449.jpeg)

When it is placed still on the desk, showing its front side, the number 4
appears.

![](media/5797dd7be9a9c2d3226123e0c29db0bd.jpeg)

When it is placed still on the desk, showing its back side, the number 5 will
exhibit.

When the board is tilted to the left , the LED dot matrix shows the number 6 as
shown below.

![](media/326095934bcff0a925b4f9a09d6cf7d2.jpeg)

When the board is tilted to the right , the LED dot matrix displays the number 7
as shown below

![](media/185b0ac204e9b2c54dd8fa93d852568c.jpeg)

When the board is knocked to the floor, this process can be considered as a free
fall and the LED dot matrix shows the number 8. (please note that this test is
not recommended for it may damage the main board.)

Attention: if you’d like to try this function, you can also set the acceleration
to 3g, 6g or 8g. But still ,we don not recommend.

### 8: Detect Light Intensity by Micro:bit

![](media/8c3f540a07aab97e1608ba8770837f7b.png)

1.  **Description：**

This project will introduce how Micro:bit detects the external light intensity.
Since Micro:bit doesn’t come with photosensitive sensor, the detection of light
intensity is completed through the LED matrix. When the light irradiates the LED
matrix, the voltage change will be produced. Therefore, we could determine the
light intensity by voltage change.

**2. What You Need**

(1) Connect micro:bit to computer with USB cable

(2) Open online Makecode editor

**Import Hex profile** [**(How to import?)** ](#_7.6.导入代码)**, or click“New
Project”and drag blocks step by step.**

**3. Test Code：**

Import hex file

| File Type | Route                                                     | File Name                                        |
|-----------|-----------------------------------------------------------|--------------------------------------------------|
| Hex file  | ../Makecode Code/6.8：Detect Light Intensity by Micro:bit | microbit-Detect Light Intensity by Micro:bit.hex |

Or you could edit code step by step in the editing area.

(1)A. Enter“Advanced”→“Serial”→“serial redirect to USB”;

B. Drag it into“on start”block.![](media/8c0cfdd76322ebf7febafa519e98b76f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2) A. Go to“Serial”→“serial write value x =0”;

B. Move it into“forever”![](media/1dcff6f8c61c0c7ac220ded584bcf988.png)

1.  A. Click“Input”→“acceleration(mg) x”

B. Put“acceleration(mg) x”in the“0”box and change “x”into“Light intensity”.

![](media/38447eae9d3e190496b9a24baea6cbe7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  A. Click“Basic”→“pause (ms) 100”;

B. Lay it down into“forever”and set to 100ms.

![](media/9ba8558c0d520cc80b01080e437ddff5.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Complete Program：

![](media/1ae769b6a1d9f6c6a393351c69b10d32.png)

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/7739b4e9b0603e04cdeb1c7051b9d2f8.png)

**4. Test Results：**

Download code to micro:bit board don’t plug off USB cable and
click![](media/e310a9105faecbe6ed8400101a4e852d.png)

([How to quick download?](#_7.3.快速下载))

![](media/04b472326485cf676cdb4dd61ca6ef1a.png)

The intensity value is 0 when covering LED dot matrix. And it varies with the
light intensity when placing micro:bit board under the sunlight. The stronger
the light is, the larger the intensity value is.

![](media/d7f1751ea1e6f251376dee5390ed21fa.png)

Open CoolTerm, click Options to select SerialPort. Set COM port and 115200 baud
rate(the baud rate of USB serial communication of Micro:bit is 115200 through
the test). Click“OK”and“Connect”.

CoolTerm serial monitor displays the light intensity.

![](media/77a6de8ab9b171353693610a09f3a83c.png)

### 9: Speaker

![](media/ac515b9ae8891dc32f368a29f194a2fb.png)

1.  Description：

The Micro: Bit main board V2 has an built-in speaker, which makes adding sound
to the programs easier. We can program the speaker to air all kinds of tones .

1.  Preparation：

2.  Attach the micro:bit to your computer

3.  Enter the online Makecode editor

**Import Hex profile** [**(How to import?)** ](#_7.6.导入代码)**, or click“New
Project”and drag blocks step by step**

1.  Test Code：

| Type     | Path                          | File Name            |
|----------|-------------------------------|----------------------|
| Hex file | ../Makecode Code/6.9：Speaker | microbit-Speaker.hex |

1.  Go to“Basic”to move out the block“show icon”into block“on start”，and click
    the triangle button to
    select“![](media/7f7aa904c35f83b61c7c560ad1e40d2a.png)”.

![](media/fed4c4f6e66e6d53fa2d8e10f01268fd.png)

1.  Click“Music”to move block“play sound giggle until done”into the
    “forever”block.

Enter“Basic”to get block“pause(ms) 100”and place it into“forever”

Change 100 into 1000.

![](media/2a264656778216144131c75fabbbabf2.png)

1.  Copy code string![](media/39f8b940e6a1a3e8dbfa8eae70aa10c3.png)for three
    times and place into“forever”，and click triangle buttons to
    set“happy”,“hello”and “yawn”.

![](media/a8cee1c98866343f817d29e2ed97c584.png)

Complete Code

![](media/7f7aa904c35f83b61c7c560ad1e40d2a.png)
The program under the block“forever”runs cyclically. Buzzer emits a“giggle”sound delay in 1000ms Buzzer emits a“happy”sound .delay in 1000ms Buzzer emits a“hello”sound delay in 1000ms Buzzer emits a“yawn”sound delay in 1000ms


Click“JSJavaScript”to switch into JavaScript language code：

![](media/984405217312d495104129a784ef76de.png)

1.  **Test Results:**

Download code to the micro:bit and plug it to the power. Then it will emit a
sound and display a music sign.

([How to download?](#A11) [How to quick download?](#A12))

### 10: Touch Sensitive Logo

![](media/644695850097c5ade080bb4848b4b481.png)

1.  **Description：**

The Micro: Bit main board V2 is equipped with a golden touch-sensitive logo,
which can act as an input component and function like an extra button.

It contains a capacitive touch sensor that senses small changes in the electric
field when pressed (or touched), just like your phone or tablet screen do.When
you press it , you can activate the program.

1.  **Preparation：**

2.  Attach the micro:bit to your computer

3.  Enter the online Makecode editor

**Import Hex profile** [**(How to import?)** ](#_7.6.导入代码)**, or click“New
Project”and drag blocks step by step**

1.  **Test Code：**

| Type     | Path                                        | File Name                         |
|----------|---------------------------------------------|-----------------------------------|
| Hex file | ../Makecode Code/6.10：Touch Sensitive Logo | microbit-Touch Sensitive Logo.hex |

1.  Delete“on start”and“forever”

2.  Enter“Input”to drag the“on logo pressed”block and click the triangle buttons
    to set **touched.**

![](media/b228ddd2c400e6cc11be3a87636c27be.png)

1.  Tap“Variables”\> ”Make a Variable”，and input **start** and click **OK**

The variable“start”is created. Click “Variables” t move “set start to 0” into
the block“on logo touched”

![](media/f425f9f9545f2d8300fbb0c8946b9ea3.png)

1.  Click“Input”\> more，and drag out the block“running time(ms)”into the 0 box
    of“set start to 0”

![](media/7af1f7fa05580ed5d588daf80351182c.png)

1.  Go to“Basic”to move block“show icon❤”into“on logo touched”

![](media/931663a2485eca2baa411b43484e5cc3.png)

1.  Go to block“Input”to drag block“on logo pressed”and select **released**，and
    create the variable“time”in same way.

2.  Enter“Variables”to drag out the block “set time to 0” into “on logo
    pressed”.

3.  Enter block“Math”to move block“0-0”into the o box of block“set time to 0”.

![](media/f2b9c02043be64c98da2e0ded2181082.png)

1.  Click“Input”\> more，move block“running time(ms)”into the left 0 box.

2.  Enter the block“Variables”to move block “start”into the right 0 box.

![](media/09e205a5774658821e5a988b63b39203.png)

1.  Drag“show number”from the“Basic”block and leave it underneath the
    block“set....start”.

2.  Go to“Math”block to move the block“square root 0”into 0 box and click the
    triangle button to integer÷ .

![](media/5056fe4add2914acf570df6706ce0bb7.png)

1.  Enter“Variables”block and drag“time”to the left 0 box

Change 0 at the right into 1000

![](media/a2247b14f9957f856485a927cfa7186e.png)

Complete Code：

![](media/bb847ad951cd721972d24fe0b90631a1.png)

Click“JSJavaScript”to switch into JavaScript language：

![](media/15d6364778e29d2a05442c6cf01cc88d.png)

**4.Test Results:**

Download test code to the micro:bit, plug in power.

Touch the logo, then LED will show“❤”image；and if the logo is not touched，the
number will appear.

([How to download?](#A11) [How to quick download?](#A12))

### 11: Microphone

![](media/7f0741158e734ff8449d5b87d5ba85f4.png)

1.  **Description：**

The Micro: Bit main board V2 is built with a microphone which can test the
volume of ambient environment. When you clap, the microphone LED indicator will
turn on. Since it can measure the intensity of sound, you can make a noise scale
or disco lighting changing with music. The microphone is placed on the opposite
side of the microphone LED indicator and in proximity with holes that lets sound
pass.When the board detects sound, the LED indicator lights up.

1.  **Preparation：**

2.  Attach the micro:bit to your computer

3.  Enter the online Makecode editor

**Import Hex profile** [**(How to import?)** ](#_7.6.导入代码)**, or click“New
Project”and drag blocks step by step**

1.  **Test Code：**

| Type     | Path                                     | File Name                 |
|----------|------------------------------------------|---------------------------|
| Hex file | ../Makecode Code/6.11：Microphone/Code-1 | microbit-Microphone-1.hex |

1.  Delete“on start”and“forever”.

2.  Click“Input”to drag out the block“on loud sound”,

Go to“Basic”to move out the block“show number”

Edit the code string as follows:

![](media/4fc47e876fa715d7e18b42f81aaf2f75.png)

1.  Duplicate the code
    string![](media/c7e2c46845a453f1de63b5e6f16af7fc.png)once，click **loud** to
    set to **quiet**，and tap ❤ to select
    ![](media/9a40d2f51ed0a372a82e559cdb2ca0dd.png)

![](media/2aa3293670d895afc772871026303399.png)

Complete Code

![](media/04fdfc9060943954e7938bb1a741d626.png)”

Click“JSJavaScript”to switch into JavaScript language：

![](media/e366483e9d5c574f3ec520f30e31e5cd.png)

**4.Test Results 1：**

Download code1 to the micro:bit and plug in power. The micro:bit will show“❤”if
you clap your hands; if not, the
image“![](media/04fdfc9060943954e7938bb1a741d626.png)”will be displayed.

([How to download?](#A11) [How to quick download?](#A12))

1.  **Test Code2:**

| Type     | Path                                     | File Name                  |
|----------|------------------------------------------|----------------------------|
| Hex file | ../Makecode Code/6.11：Microphone/Code-2 |  microbit-Microphone-2.hex |

1.  Click“Advanced”\>“Serial”, move block“serial redirect to USB”into“on start”

![](media/8c0cfdd76322ebf7febafa519e98b76f.png)

1.  Tap“Variables”\>“Make a Variable”, input **maxSound** and click **OK**，The
    the variable“maxSound”is produced.

2.  Move out the block“set maxSound to 0”from the“Variables” and place it as
    follows:

![](media/39347e31badf7d15710fc12f581ce7e1.png)

1.  Click“Logic”to move the block“if true then...else”into“forever”，Go to the
    block“Input”to drag the block“button A is pressed”and place it as follows:

![](media/643d739679dd8891a240feda70868302.png)

1.  Go to the block“Basic”to get the block“show number”

2.  Enter “Variables”to get the block“maxSound”

Place them as follows:

![](media/eff0b22497be40e1826bccef95ceb0a4.png)

1.  Then we create the variable“soundLevel”

Go to the block“Variables”to get the block“set soundLevel to 0”

Click“Input”to get“sound level”

Place them as follows:

![](media/c84fcdd7bfc4b545e420fa2d6a975bfe.png)

1.  Tap“Led”to drag“plot bar graph of 0 up to 0”underneath the
    block“set....level”

Enter“Variables”to get the block“soundLevel”

Then place them as follows and change 0 into 255.

![](media/adc684949503c334c505157743fdbc7b.png)

1.  Go to“Logic”to drag the block“if true then”and“0 \> 0”

Enter“Variables”to get“soundLevel”and“maxSound”

Then Place these blocks as follows:

![](media/928f828756c965def348b56ef5299749.png)

1.  Go to“Variables”to move“set maxSound to 0”and“soundLevel”

Edit these blocks as follows:

![](media/d62369e61dcc9dba69b80c93b1c7c7e8.png)

**Complete Code**

![](media/c42455108c20d4ae51546957ab4198bb.png)

Click“JSJavaScript”to switch into JavaScript language：

![](media/4e327f5f9ed716e6cf27cccba674f1c3.png)

1.  **Test Result2：**

Download test code2 to the micro:bit and plug in power and click **Show console
device**

( [How to quick download?](#A12))

![](media/e22507af4953df977269bbdb2463d69e.png)

When the sound amplifies, the output sound value will increase as well, as shown
below:

![](media/50b81518d9f7925b0c20476ab1f64185.png)

When the button A is pressed, LED will show the detected maximum sound value and
when you clap your hands, the LED matrix will a show bar graph.

### 12: Bluetooth Wireless Communication

![](media/55b2424d88ba1ba8a711c49418ca8dc6.png)

1.  **Description：**

The Micro: Bit main board V2 comes with a nRF52833 processor (with built-in
Bluetooth 5.1 BLE(Bluetooth Low Energy) device) and a 2.4GHz antenna for
Bluetooth wireless communication and 2.4GHz wireless communication. With the
help of them, the board is able to communicate with a variety of Bluetooth
devices, including smart phones and tablets.

In this project, we mainly concentrate on the Bluetooth wireless communication
function of this main board. Linked with Bluetooth, it can transmit code or
signals. To this end, we should connect an Apple device (a phone or an iPad) to
the board.

Since setting up Android phones to achieve wireless transmission is similar to
that of Apple devices, no need to illustrate again.

**2. What You Need**

-   Link micro:bit board with computer by USB cable.

-   iOS system(cellphone or iPad) or Android system

**iOS System**

Navigate website：<https://www.microbit.org/get-started/user-guide/ble-ios/> ,
click“**Download pairing HEX file**”to download micro:bit’s firmware into the
created folder or place it on the desktop and burn it to the micro:bit.
![](media/cfaf7f8ae83cbe2636c39162a78adc7f.png)

![](media/6c1cef08d31fe3c4876b90ecc11554ff.jpeg)

![](media/63f1faf124af4949b31d7a84cee19a92.png)

Search“Micro:bit”in APP store and install it, as shown below:

![](media/66d1f34d8d4c52e2b7c0ce10e602a063.png)

Connect the Micro:bit to App

Enable the Bluetooth of your cellphone

a. Enter app![](media/ddfd27bdd24da96eb998ccc2e13fcf72.png), attach the
micro:bit to computer with USB cable, and tap“Choose Micro:bit”to start
Bluetooth pairing.

![](media/34f5fbb1c0c371970d1aec6c59c5cbb5.png)

b. Click“Pair a new Micro:bit”

![](media/e20270a0ade9c00b61198b26fc2fd83b.png)

c. Hold down button A and B, press and the reset button at the other side of the
micro:bit then release it. LED dot matrix will show a password image. At last,
release the button A and B at same time and click“Next”.

![](media/c00520400ecd1f20f958c1c6d1a3c907.png)

![](media/c00520400ecd1f20f958c1c6d1a3c907.png)

![](media/cabc60d7f8a030f5c9d86ac7de6c7bd7.png)

Design the password image on the cellphone and click“Next”.

![](media/9411a5280e6f3b0d45306a31f80c1b38.png)

e. Click“Next”and pair. After pairing successfully, LED dot matrix will
display“√”image.

![](media/803cb5cf5f7d595581a11f5e6b7e61ed.png)
![](media/f72e83dc6276d520e82c349659106e1a.png)

After connecting successfully, design code via APP .

f. Select“Create Code”,
click![](media/f4d8d6b0adf0fbc6c098ddf30fe86933.png)and appear the dialog
box![](media/59567ef7dbca43e8242bc6c6c1f78713.png)，and click
icon![](media/5fc22fb58590f911d913ef56a32e8ea1.png)to enter the programming
interface.

![](media/d54bf2d1c01cd3c18544009b1f9dc5a0.png)

![](media/4e7a5d06a5f9a5a209ef5fbc005e9f62.png)

![](media/5bd84e8d293bf8c0c999c7f4e756cf30.png)

![](media/bd19bb4c97ad2a5bc300412b8eb93ede.png)

Name your project(we set to 1) and
click“![](media/a32c2d832ab38d19eb623108143c744e.png)”

![](media/25cf76f891c5eac7381b8095363a2748.png)

After saving the code, click“Flash”to enter the code uploading page.

Tap“Flash”to upload the code“1”

![](media/c1661720ea2eaa521ff31a778501eb23.png)

![](media/350abcbb09d431d40427f34c3764f2eb.png)

![](media/4863bf826f119805a6a9bf9c12d5ec81.png)

At last, LED dot matrix will show the heartbeat image.

![](media/ebfd31347a0553de0be4e01636652a15.png)

From project 1 to 12, we’ve introduced the micro:bit’s components. In the
further lessons, we will conduct some expansion experiments

Disconnect the power between the micro:bit and expansion board(slide POWER to
OFF end) to avoid damaging the micro:bit.

### 13: Passive Buzzer

![](media/da6ec0cad581a9429307efe57c566b70.png)

**1. Description：**

We can use Micro:bit board to make many interactive works of which the most
commonly used is acoustic-optic display. The previous lessons are related to
LED. However, we will elaborate the Sound in this lesson.

Buzzer is inclusive of active buzzer and passive buzzer.

The passive buzzer doesn’t carry with vibrator inside, so it need external sine
or square wave to drive. It can produce slight sound when connecting directly to
power supply. It features controlling sound frequency and producing the sound
of“do re mi fa so la si”.

A diode should be connected in reverse when driving by the square wave signal
source, which will hinder the high-voltage generated to damage other components
or service life when the power breaks down.

Frequency is made of a series of pitch names in English letters and Numbers. You
can choose different frequencies, that is, tone. The frequency of sound is
called pitch.

It involves music knowledge. In music lesson, our teacher taught“1（Do）,
2（Re）, 3(Mi), 4(Fa) , 5(Sol), 6(La), 7(Si)”

| 1（Do） | 2（Re） | 3(Mi) | 4(Fa) | 5(Sol) | 6(La) | 7(Si) |
|---------|---------|-------|-------|--------|-------|-------|
| C       | D       | E     | F     | G      | A     | B     |

The number depends on high or low tone. The larger the number, the higher the
tone. When the number is same, the frequency (tone) is getting higher and higher
from C to \_B.

Beats are the time delay for each note. The larger the number, the longer the
delay time. A note without a line in the spectrum is a beat, with a delay of
1000 milliseconds. while a beat with an underline is 1/2 of a beat without a
line, and a beat with two underlines is 1/4 of a beat without a line.

（![](media/a57464c004160236cb89f0deb31f185d.png)）

Here is the notation of Ode to Joy.

![](media/4a79470cc28f087a3834d168bc0c343f.jpeg)

**2. What You Need**

1.  Insert micro:bit board into slot of V2 shield..

2.  Place batteries into battery holder.

3.  Plug smart car in power.

**Link with computer by USB cable and enter online micro:bit editor.**

**Import Hex profile**[**(How to import?)** ](#_7.6.导入代码)**, or click “New
Project”and drag blocks step by step.**

1.  **Test Code：**

Import hex file

| File Type | Route                                 | File Name               |
|-----------|---------------------------------------|-------------------------|
| Hex file  | ../Makecode Code/6.13：Passive Buzzer | microbit-Play music.hex |

Or you could edit code step by step in the editing area.

1.  Click “Led”→”more”→“led enable false”, combine it with“on
    start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“Music”→“play tone Middle C for 1 beat”， leave it
    into“forever”block，then tap “Middle C”, then
    appear![](media/11c6b50086b6d6327916554f55c4f79b.png)code.

Choose“High E”and set to“1 beat”.

![](media/656e8c737018a47d11ab497483a808ef.png).

![](media/8eb86db29abd1058de4547b2835f7051.png)

Duplicate“play tone High E for 1 beat”for 124 times and click“High E”and“1 beat”

To set up as follows:

| \#  | tone     | beat | \#  | tone     | beat | \#  | tone     | beat | \#  | tone     | beat |
|-----|----------|------|-----|----------|------|-----|----------|------|-----|----------|------|
| ①   | High E   | 1    | ②   | High F   | 1    | ③   | High G   | 1    | ④   | High G   | 1    |
| ⑤   | High F   | 1    | ⑥   | High E   | 1    | ⑦   | High D   | 1    | ⑧   | High C   | 1    |
| ⑨   | High C   | 1    | ⑩   | High D   | 1    | ⑪   | High E   | 1    | ⑫   | High E   | 1    |
| ⑬   | High D   | 1/2  | ⑭   | High D   | 1    | ⑮   | High E   | 1    | ⑯   | High E   | 1    |
| ⑰   | High F   | 1    | ⑱   | High G   | 1    | ⑲   | High G   | 1    | ⑳   | High F   | 1    |
| ㉑  | High E   | 1    | ㉒  | High D   | 1    | ㉓  | High C   | 1    | ㉔  | High C   | 1    |
| ㉕  | High D   | 1    | ㉖  | High E   | 1    | ㉗  | High D   | 1    | ㉘  | High C   | 1/2  |
| ㉙  | High C   | 1    | ㉚  | High D   | 1    | ㉛  | High D   | 1    | ㉜  | High E   | 1    |
| ㉝  | High C   | 1    | ㉞  | High D   | 1    | ㉟  | High E   | 1/2  | ㊱  | High F   | 1/2  |
| ㊲  | High E   | 1    | ㊳  | High C   | 1    | ㊴  | High D   | 1    | ㊵  | High E   | 1/2  |
| ㊶  | High F   | 1/2  | ㊷  | High E   | 1    | ㊸  | High D   | 1    | ㊹  | High C   | 1    |
| ㊺  | High D   | 1    | ㊻  | Middle G | 1    | ㊼  | High E   | 1    | ㊽  | High E   | 1    |
| ㊾  | High E   | 1    | ㊿  | High F   | 1    | 51  | High G   | 1    | 52  | High G   | 1    |
| 53  | High F   | 1    | 54  | High E   | 1    | 55  | High D   | 1    | 56  | High C   | 1    |
| 57  | High C   | 1    | 58  | High D   | 1    | 59  | High E   | 1    | 60  | High D   | 1    |
| 61  | High C   | 1/2  | 62  | High C   | 1    | 63  | High D   | 1    | 64  | High D   | 1    |
| 65  | High E   | 1    | 66  | High C   | 1    | 67  | High D   | 1    | 68  | High E   | 1/2  |
| 69  | High F   | 1/2  | 70  | High E   | 1    | 71  | High C   | 1    | 72  | High D   | 1    |
| 73  | High E   | 1/2  | 74  | High F   | 1/2  | 75  | High E   | 1    | 76  | High D   | 1    |
| 77  | High C   | 1    | 78  | High D   | 1    | 79  | Middle G | 1    | 80  | High E   | 1    |
| 81  | High E   | 1    | 82  | High E   | 1    | 83  | High F   | 1    | 84  | High G   | 1    |
| 85  | High G   | 1    | 86  | High F   | 1    | 87  | High E   | 1    | 88  | High C   | 1    |
| 89  | High C   | 1    | 90  | High C   | 1    | 91  | High D   | 1    | 92  | High E   | 1    |
| 93  | High D   | 1    | 94  | High C   | 1/2  | 95  | High C   | 1    | 96  | High D   | 1    |
| 97  | High C   | 1/2  | 98  | High C   | 1    | 99  | High G   | 1    | 100 | High F   | 1    |
| 101 | High E   | 1/2  | 102 | High E   | 1    | 103 | High C   | 1    | 104 | High B   | 1    |
| 105 | High A   | 1/2  | 106 | High A   | 1    | 107 | High F   | 1/2  | 108 | High D   | 1/2  |
| 109 | High C   | 1/2  | 110 | Middle B | 1/2  | 111 | High D   | 1/2  | 112 | Middle B | 1/2  |
| 113 | Middle A | 1/2  | 114 | Middle G | 1/2  | 115 | Middle A | 1/2  | 116 | Middle B | 1/2  |
| 117 | High C   | 1/2  | 118 | High E   | 1/2  | 119 | High D   | 1/2  | 120 | Middle B | 1/2  |
| 121 | High C   | 1    | 122 | High C   | 1/2  | 123 | High C   | 1/4  | 124 | High C   | 1    |

1.  According to the above music score. Copy“play tone High E for 1 beat”124
    times，separately change“High E”of“play tone High E for 1 beat”into“High
    E”,“High F”,“High G”,“High G”,“High F”,“High E”,“High D”,“High C”,“High
    C”,“High D”,“High E”,“High E”,“High D”,“High D”,“High E”,“High E”,“High
    F”,“High G”,“High G”,“High F”,“High E”,“High D”,“High C”,“High C”,“High
    D”,“High E”,“High D”,“High C”,“High C”,“High D”,“High D”,“High E”,“High
    C”,“High D”,“High E”,“High F”,“High E”,“High C”,“High D”,“High E”,“High
    F”,“High E”,“High D”,“High C”,“High D”,“Middle G ”,“High E”,“High E”,“High
    E”,“High F”,“High G”,“High G”,“High F”,“High E”,“High D”,“High C”,“High
    C”,“High D”,“High E”,“High D”,“High C”,“High C”,“High D”,“High D”,“High
    E”,“High C”,“High D”,“High E”,“High F”,“High E”,“High C”,“High D”,“High
    E”,“High F”,“High E”,“High D”,“High C”,“High D”,“Middle G”,“High E”,“High
    E”,“High E”,“High F”,“High G”,“High G”,“High F”,“High E”,“High C”,“High
    C”,“High C”,“High D”,“High E”,“High D”,“High C”,“High C”,“High D”,“High
    C”,“High C”,“High G”,“High F”,“High E”,“High E”,“High C”,“High B”,“High
    A”,“High A”,“High F”,“High D”,“High C”,“Middle B”,“High D”,“Middle
    B”,“Middle A”,“Middle G”,“Middle A”,“Middle B”,“High C”,“High E”,“High
    D”,“Middle B”,“High C”,“High C”,“High C”,“High C”.

Then set beat
to“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1/2”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1/2”,“1”,“1”,“1”,“1”,“1”,“1”,“1/2”,“1/2”,“1”,“1”,“1”,“1/2”,“1/2”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1/2”,“1”,“1”,“1”,“1”,“1”,“1”,“1/2”,“1/2”,“1”,“1”,“1”,“1/2”,“1/2”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1/2”,“1”,“1”,“1/2”,“1”,“1”,“1”,“1/2”,“1”,“1”,“1”,“1/2”,“1”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1”,“1/2”,“1/4”,“1”.

Complete Program：

![](media/92a9ebb890e32033434669765286d176.png)

![](media/bfb63d87ff6b10a71dc5aaec192e2029.png)

![](media/79acaee4559fadfc7c1278d03dbef0d8.png)

![](media/20a0a38a3b4bf3aa73e58a97061c541d.png)

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/97d220b732aa630a4dfc3d7891469af5.png)

![](media/cc1aa8edafe1e32897fac847385d2d39.png)

![](media/9c20144ddf8d1b3c788768b480dbb07f.png)

1.  **Test Result：**

Download code to micro:bit board and dial POWER switch to ON end. The“Ode to
Joy” is played by passive buzzer

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

### 14: RGB Experiments

1.  **Description：**

![](media/eb371068cdb58006e9e422beb919bc1c.png)

The RGB color mode is a color standard in the industry. It obtains various
colors by changing the three color channels of red (R), green (G), and blue (B)
and integrating them. RGB denotes the three colors of red, green and blue.  
The monitors mostly adopt the RGB color standard, and all the colors on the
computer screen are composed of the three colors of red, green and blue mixed in
different proportions. A group of red, green and blue is the smallest display
unit. Any color on the screen can be recorded and expressed by a set of RGB
values.

Each of the three color channels of red, green, and blue is divided into 256
levels of brightness. At 0, the "light" is the weakest-it is turned off, and at
255, the "light" is the brightest. When the three-color gray values are the
same, the gray tones with different gray values are produced, that is, when the
three-color gray is 0, the darkest black is generated; when the three-color gray
is 255, it is the brightest white tone .

| Color                                     | RGB value（R,G,B） | Color code | Color    | RGB value（R,G,B） | Color code |
|-------------------------------------------|--------------------|------------|----------|--------------------|------------|
| Black                                     | 0,0,0              | \#000000   | Red      | 255,0,0            | \#FF0000   |
| Green                                     | 0,255,0            | \#00FF00   | Blue     | 0,0,255            | \#0000FF   |
| indigo                                    | 0,255,255          | \#00FFFF   | Dark red | 255,0,255          | \#FF00FF   |
| Yellow                                    | 255,255,0          | \#FFFF00   | White    | 255,255,255        | \#FFFFFF   |
| ......                                    | .......            | ......     | ......   | ......             | ......     |
| Adjust the numbers to get gradient colors |                    |            |          |                    |            |

RGB colors are called additive colors since the adding of R, G, and B together
(that is, all light reflect back to the eye) produces white color. Additive
colors are used for lighting, television and computer displays. For example,
displays produce color by emitting red, green, and blue rays. Most visible
spectra can be expressed as a mixture of red, green and blue (RGB) light in
different proportions and intensities. If these colors overlap, they produce
cyan, magenta and yellow.

We will make two experiments, one is that two RGB LEDs light up red, green,
blue, indigo, dark red, yellow and white color, another one is that RGB lights
display color in gradient way.

**2. What You Need**

1.  Insert micro:bit board into slot of V2 shield.

2.  Place batteries into battery holder.

3.  Plug smart car in power

4.  Link with computer by USB cable and enter online micro:bit editor

Import Hex profile[**(How to import?)** ](#_7.6.导入代码)**,** or click“New
Project”and drag blocks step by step(add k-bit extension library first) [**(How
to add k-bit extension?)**](#M11)

**3. Test Code：**

**Code 1**

RGB emits seven colors

Import hex file

| File Type | Route                                         | File Name           |
|-----------|-----------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.14：RGB experiments/Code-1 | microbit-Code-1.hex |

Or you could edit code step by step in the editing area.

1.  Enter“K-Bit”→“LED brightness 0”

Put it into“on start”block.

Change 0 into any number in the range of 0-255, the larger the number set, the
lighter RGB. We set to 70

![](media/9676fe53d37c492b3e901bb000eaf01d.png)

1.  Go to“K-Bit”to move out“set RGB led R：0 G：0 B：0”block into“forever”

Set code as follows:

![](media/4f5de679a1e9b088aaed3f7140e72d9d.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3) Go to“Basic”to drag block“pause (ms) 100”into“forever”, then set to 1000ms.

![](media/803ed150ae4f8cd56cd8c1d81b9233b4.png)

(4) Copy code string![](media/b145e77d85dc5445f63115d280a3e7c9.png)for six times
and put them into“forever”.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5) Separately set to“R：0 G：255 B：0”,“ R：0 G：0 B：255”,“ R：0 G：255
B：255”,“ R：255 G：0 B：255”,“ R：255 G：255 B：0”and“ R：255 G：0 B：255”.

![](media/ef7cd88a83cdcdb2eba21d7855710ebf.png)

Complete Program：

![](media/3a0aeb802033cbff5f81c8146449e356.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/7e8d1df36f52792acf38f1d62b984b9e.png)

**Color 2：**

RGB lights display color in gradient way.

| File Type | Route                                          | File Name           |
|-----------|------------------------------------------------|---------------------|
| Hex file  | ../Makecode Code /6.14：RGB experiments/Code-2 | microbit-Code-2.hex |

1.  Go to“K-Bit”to move block“LED brightness 0”into“on start”

Change 0 into 200

![](media/fb0b8de118d8df3f4679e4f7a6fe16a9.png)

1.  Go to“Variables” →“Make a Variable...”→“New variable name：” dialog box，

2.  Input“led-r”and click“OK”to produce variable“led-r”，

Then set variable“led-g”and“led-b”in same way.

Move block“set led-b to 0”into“on start”

Copy“set led-b to 0”block twice and set to led-r, led_g and led_b

![](media/f90fc89be465de7b8f3bb5b7e2581045.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Loops”to drag block“repeat 4 times do”into“forever”

![](media/0b59ea27321aeb7681aeba8b581d0305.png)

(5) Drag block“set RGBled R：0 G：0 B：0” into block“repeat 4 times do”

Click“Variables”to move block“led-r”into 0 box behind R.

![](media/f6381f70ce428371844398218acab117.png)

1.  Move block“pause (ms) 100”from“Basic”and place it into“repeat 4 times do”.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

![](media/c2c00d6409c1db48f80622a3ff16f22e.png)

1.  Enter“Variables”to move block“change led-b by 1”under block“pause (ms) 100”.

2.  Click triangle to change led-b into led-r.

The R value is in the range of 0-255, and we make variable“led-r”increases by 5
every time. Therefore, 51 times in total.

Set repeat 51 times and“by 5”.

![](media/aed8057dcd82302852e87e34fb33b112.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Copy code string ![](media/aed8057dcd82302852e87e34fb33b112.png)once and
    leave it into“forever”.

2.  To make RGB get darker gradually, we set“led-r by -5”, 51 times in total. So
    we change 5 into -5.

    ![](media/99351aa9a3abd7527d9f98b3eef83290.png)

Replicate ![](media/d798145a584a0e10213dacdd7d0b3b8a.png)twice and keep them
into“forever”block. And edit code string as follows：

![](media/2d01040411b4b44ef5d597d00aba7a8a.png)

Complete Program：

![](media/32501d2cef23b644de06f3048498d0aa.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/79b36bc400e84cfa08ef376e41fce0f0.png)

**4. Test Result：**

Download code 1 to micro:bit board and turn on the switch at the back of
micro:bit car, 2 RGB lights of smart car emit red, green, blue, indigo, dark
red, yellow and white color cyclically.

Download code 2 to micro:bit board and turn on the switch at the back of
micro:bit car, 2 RGB lights show different color cyclically.

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

### 15: Light up KEYES-2812-18R Module

1.  **Description：**

![](media/d924b78e373df3345d76916f2afbbaed.png)

The KEYES-2812-18R module comes with 18 pcs WS2812 RGB lights which are
compatible with Micro:bit board. In this project, we make this module to perform
different effects via four test code.

**2. What You Need**

1.  Insert micro:bit board into slot of V2 shield.

2.  Place batteries into battery holder.

3.  Plug smart car in power

4.  Link with computer by USB cable and enter online micro:bit editor

5.  Import Hex profile[**(How to import?)** ](#_7.6.导入代码)

6.  Or click“New Project”and drag blocks step by step(add k-bit extension
    library first)

[**(How to add k-bit extension?)**](#M11)

**3. Test Code：**

**Code 1：**

**Import hex file**

| File Type | Route                                                        | File Name            |
|-----------|--------------------------------------------------------------|----------------------|
| Hex file  | ../Makecode Code/6.15：Light up KEYES-2812-18R Module/Code-1 |  microbit-Code-1.hex |

Or you could edit code step by step in the editing area.

1.  a. Enter“Neopixel” →“set strip to Neopixel at pin P0 with 24 leds as RGB
    (GRB format)”

b. Place it into“on start”block，

c. Signal end D1 of KEYES-2812-18R module is connected to D5(P5 of micro:bit
board) of expansion . So we set to P5.

d. KEYES-2812-18R module comes with 18 pcs WS2812 RGB, then change 24 into 18.

![](media/0bcc7c11fdae26d690b3c8e366efd325.png)

1.  Click“Neopixel”to move block“strip clear”into“on start”block.

    ![](media/ad521aef971b1ecafde7802d1135959f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“Neopixel”to move block “strip show color red” into “forever” block

    ![](media/88de3d44c971c2369711430a893d7821.png)

1.  Click“Basic”to move“pause (ms) 100”block into“forever”block

    Then set to 1000ms

    ![](media/ba93a1de285dc713513a788b420e3ce6.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Copy code string ![](media/e553a68f56eba016892b29528e711907.png)for eight
    times, and separately place into“forever”block .

1.  Click triangle button to set orange, yellow, green, blue, indigo, violet
    purple and white.

![](media/8f81b4140d4d755eb644f82432d8753e.png)

Complete Program：

![](media/77b056b6313d466b554cb545c1df412e.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/8ba524c2dd83a0403773a53b3cf5b9d8.png)

**Code 2：**

Hex File:

| File Type | Route                                                        | File Name            |
|-----------|--------------------------------------------------------------|----------------------|
| Hex file  | ../Makecode Code/6.15：Light up KEYES-2812-18R Module/Code-2 |  microbit-Code-2.hex |

1.  a. Enter“Neopixel” →“set strip to Neopixel at pin P0 with 24 leds as RGB
    (GRB format)”

b. Place it into“on start”block，

c. Signal end D1 of KEYES-2812-18R module is connected to D5(P5 of micro:bit
board) of expansion . So we set to P5.

d. KEYES-2812-18R module comes with 18 pcs WS2812 RGB, then change 24 into 18.

![](media/0bcc7c11fdae26d690b3c8e366efd325.png)

1.  Enter“Neopixel”→“strip show rainbow from 1 to 360”

Place it into“on start”

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

![](media/1cd97c55c6e6b13650bd9819fc27767f.png)

1.  Go to“Neopixel”to move“strip shift pixels by 1”into“forever”block.

    ![](media/fff6e93f0e06d7da2459c5330e57410e.png)

Put block“pause (ms) 100”into“forever”block.

![](media/7f0769810c38139c5099f9344d3f5631.png)

Click“Neopixel”to drag“strip show”into“forever”block.

![](media/169b34ecddd63454bd16aa2940fa719d.png)

Complete Program：

![](media/dcbdd86e955c7e485d98a6620e14a8c9.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/8e63f849d0099fd7f8a06360e480c5c3.png)

**Code 3：**

Hex File:

| File Type | Route                                                        | File Name           |
|-----------|--------------------------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.15：Light up KEYES-2812-18R Module/Code-3 | microbit-Code-3.hex |

1.  a. Enter“Neopixel” →“set strip to Neopixel at pin P0 with 24 leds as RGB
    (GRB format)”

b. Place it into“on start”block，

c. Signal end D1 of KEYES-2812-18R module is connected to D5(P5 of micro:bit
board) of expansion . So we set to P5.

d. KEYES-2812-18R module comes with 18 pcs WS2812 RGB, then change 24 into 18.

![](media/0bcc7c11fdae26d690b3c8e366efd325.png)

1.  Click“Loops”to move block“for index from 0 to 4...do”into“forever” block.

Change 4 into 17.

![](media/af52ad2c04732be736570b4a55763fe4.png)

1.  Click“Neopixel”→“strip clear”

Place it into“for index from 0 to 17...do”

![](media/5ef49379c64f9f9bb9b32326d1c69908.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Drag block“strip set pixel color at 0 to red”from“Neopixel”and place it
    into“forever”block.

Drag variable“index”into 0 box

![](media/1e34a4ccf332c907e00723c4cb24d4c3.png)

1.  Enter“Neopixel”to move block“strip show”into“for index from 0 to
    17...do”block.

    ![](media/72c614ab84305df5e18047462d8157ef.png)

(6) Move block“pause (ms) 100”below block “strip show”

![](media/0ccd49a7cc5643bf1d365af80647c82a.png)

(7) Replicate code string![](media/9a4b1089f20734bdfaff0a230cb4a2e9.png)for
eight times.

(8) Place it into“forever”block.

Respectively set to orange, yellow, green, blue, indigo, violet, purple and
white.

Complete Program：

![](media/13765db96e4ef7366a8a02d2dc167104.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/46f4ce5be8adb4027582e4211b32da8a.png)

![](media/64919ea58e998bff7fbfdb4473bd619d.png)

**Code 4：**

Import hex file.

Hex File:

| File Type | Route                                                        | File Name           |
|-----------|--------------------------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.15：Light up KEYES-2812-18R Module/Code-4 | microbit-Code-4.hex |

1.  a. Enter“Neopixel” →“set strip to Neopixel at pin P0 with 24 leds as RGB
    (GRB format)”

b. Place it into“on start”block，

c. Signal end D1 of KEYES-2812-18R module is connected to D5(P5 of micro:bit
board) of expansion. So we set to P5.

d. KEYES-2812-18R module comes with 18 pcs WS2812 RGB, then change 24 into 18.

![](media/0bcc7c11fdae26d690b3c8e366efd325.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Variables” →“Make a Variable...”→ “New variable name：” dialog box，

Input“R”and click “OK” to produce variable“R”，

Then set variable“G”and“B”in same way.

Move block“set B to 0”into“on start”

Copy“set B to 0”block twice and set to R, G and B

![](media/2c4e15c803661394ef6b33b4a832120e.png)

1.  Move out“for index from 0 to 4...do”block from“Loops”

Change 4 into 17.

![](media/af52ad2c04732be736570b4a55763fe4.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Drag block“set B to 0”into“for index from 0 to 4...do”block

Click triangle button to set R.

Go to“Math”block to move out block“pick random 0 to 10”

Set to“pick random 10 to 255”and leave it into 0 box.

![](media/e1fbbf149e9b1a1adb1e00d66bb48c0b.png)

1.  Copy code![](media/141700e2baf4f6ec06126a7eabdd15c3.png)twice and keep them
    into“for index from 0 to 4...do”block.

Then click triangle button to choose G and B.

![](media/af9d470b096faa87eb990e419f61505c.png)

1.  Enter“Neopixel”to move block“strip clear”

Leave it under block“Set B...255”block.

![](media/1fec0997d740dcfa2100c66eb034fee8.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Neopixel”→“more”→“strip set pixel color at 0 to red”

Put it below the block“strip clear”

Then drag out block“red 255 green 255 blue 255”and place it into red box.

Go to“Variables”to move out“index”,“R”, G”and“B”

Edit the whole code as follows:

![](media/5a40f2b63dd217066e5ecbf8db72e2ef.png)

(8) Place block“pause (ms) 100”into“for index from 0 to 17...do”

Set to 500ms.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

![](media/5f7f5062cc4d5b2772b4b14a94a4dfa9.png)

(9) Click“Neopixel”to move block“strip show”under block“pause (ms) 500”.

![](media/24c02d93a3e60888dea9212f21685f02.png)

Complete Program：

![](media/7178bf6d7fe26d6cb597ad259ca5f85e.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/7b494fa397846bb9fe01d680ecb5db09.png)

1.  **Test Results：**

Download code 1 to micro：bit, KEYES-2812-18R module lights up red, orange,
yellow, green, blue, indigo, violet, purple and white color cyclically.

Download code 2 to micro：bit, KEYES-2812-18R module shows rainbow color and
every WS2812RGB light turns off one by one

Download code 3 to micro：bit, every WS2812RGB light shows same color (red,
orange, yellow, green, blue, indigo, violet, purple and white color) and tuns
off one by one.

Download code 4 to micro：bit, every WS2812RGB light shows random color one by
one.

(Note: turn on the switch at the back of micro:bit car)

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

### 16: Photoresistor

1.  **Description：**

![](media/d886f14ac931f651ba7977c396fcb785.png)

The photocell sensor (photoresistor) is a resistor made by the photoelectric
effect of a semiconductor. It is very sensitive to ambient light, thus its
resistance value vary with different light intensity.

We use its features to design a circuit and generate a photoresistor sensor
module. The signal end of the module is connected to the analog port of the
microcontroller. When the light intensity increases, the resistance decreases,
and the voltage of the analog port rises, that is, the analog value of the
microcontroller also goes up. Otherwise, when the light intensity decreases, the
resistance increases, and the voltage of the analog port declines. That is, the
analog value of the microcontroller becomes smaller. Therefore, we can use the
photoresistor sensor module to read the corresponding analog value and sense the
light intensity in the environment.

It is commonly applied to light measurement, control and conversion, light
control circuit as well.

The smart robot car comes with photoresistor. In the experiment, we control 18
RGB lights by photoresistor. The darker the ambient environment, the lighter the
RGB.

**2. What You Need**

1.  Insert micro:bit board into slot of V2 shield.

2.  Place batteries into battery holder.

3.  Plug smart car in power

4.  Link with computer by USB cable and enter online micro:bit editor

5.  Import Hex profile[**(How to import?)** ](#_7.6.导入代码)

6.  Or click“New Project”and drag blocks step by step(add k-bit extension
    library first)

[**(How to add k-bit extension?)**](#M11)

1.  **Test Code：**

**Code 1：**

Photoresistor detects the light intensity.

Import hex file.

| File Type | Route                                       | File Name           |
|-----------|---------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.16：Photoresistor/Code-1 | microbit-Code-1.hex |

Or you could edit code step by step in the editing area.

1.  Click“Advanced”→“Serial”→“serial redirect to USB”

Keep it into“on start”block.

![](media/73b63660eb8f378dea4930f354d04de6.png)

1.  Enter“Advanced” →“Serial” →“serial write value “x”=0”

Leave it into“forever”block.

![](media/e2bdbea7e54cbdaddeb52c992de81311.png)

1.  Click“K_Bit”→“photoresistor”

Leave it into 0 box of “=”

Change“x”into“analog signal”

![](media/6ae8ad0b1f7519ef2f8b1509e7818b57.png)

Drag“pause (ms) 100”block into“forever”block

![](media/0c5d4ff3eb88ed356e7ea25fdefe6a1b.png)

Complete Program：

![](media/1ff04de82d4e1f166e67980e00a9a898.png)


Click“JavaScript" to view the corresponding JavaScript code:

![](media/9344467af22550fd8ce79a1067ff75e3.png)

Download code to micro:bit board, don’t plug off USB cable
click![](media/e310a9105faecbe6ed8400101a4e852d.png)

([How to quick download?](#_7.3.快速下载))

![](media/4e5fa874a2e50f1c7730c1aabc47ede6.png)

The data of light intensity is shown below:

![](media/4c2234f71174b24389d3d667d2787447.png)

The above data shows that as the ambient light intensity gets dark, the analog
value reduces gradually, otherwise, the value is getting bigger.

Open CoolTerm, click Options to select SerialPort. Set COM port and 115200 baud
rate(the baud rate of USB serial communication of Micro:bit is 115200 through
the test). Click “OK” and “Connect”.

CoolTerm serial monitor displays the corresponding value.

The weaker the ambient light intensity, the smaller the analog value.

![](media/8c171307244fb86b2184ea235be3802e.png)

**Code 2：**

Hex File:

| File Type | Route                                                   | File Name           |
|-----------|---------------------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.16：Photoresistor Detection-1/Code-2 | microbit-Code-2.hex |

(1)

1.  Click“Variables”→“Make a Variable...”→“New variable name：”dialog box;

2.  Enter“val”and click“OK”to produce variable“val”

3.  Move block“set val to 0”into“on start”block

![](media/8541693775e8d500ac8bab0bc5f83581.png)

(2) a. Enter “Neopixel” →“set strip to Neopixel at pin P0 with 24 leds as RGB
(GRB format)”

b. Place it into“on start”block，

c. Signal end D1 of KEYES-2812-18R module is connected to D5(P5 of micro:bit
board) of expansion . So we set to P5.

d. KEYES-2812-18R module comes with 18 pcs WS2812 RGB, then change 24 into 18.

![](media/677916769e0a6166c03cb055cfa93312.png)

(3) Click“Neopixel”to move block“strip clear”into“on start”block

![](media/b961bcb4c7769d5678171ef16b6cd7d5.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Variables”to drag block“set strip to 0”into“forever”

Click“strip”to select val.

Go to“Math” to drag “map 0 from low 0 high 1023 to low 0 high 4” block into 0
box.

Then move block“photoresistor”from“K_Bit”block and place it into 0 box behind
map.

Change 4 into 255.

![](media/f58572a7248be8b9e2c89ceca125ab8b.png)

1.  Click“Neopixel”to move“strip show color red”block into“forever”;

Then click“Neopixel” →“more” →“red 255 green 255 blue 255”

Keep it into red box

![](media/e242b09b8e549815733532714c1c061f.png)

1.  Go to“Math”to drag“0 - 0” block into“255”box behind red

Enter“Variables”to move variable“val”into 0 box at right and change left 0 into
255\. Then get block“255-val”.

Replicate“255-val”twice and leave them into boxes behind green and blue.

![](media/cac8a8639278f91655542a8fb69695d2.png)

Move block“pause (ms) 100”into“forever”block

![](media/a6fba8b10ff0c3f4a856dbf7bc055c3a.png)

Complete Program：

![](media/1e672fa8c6121674e5b983905fd120a3.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/e012c89c11e07b9ad3c6bd038c8a7af0.png)

1.  **Test Results：**

Download code 2 to micro:bit board and turn on the switch at the back of
micro:bit car, 18RGB lights emit white color. The darker the light, the stronger
the light intensity of 18 RGB lights

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

### 17: Motor Driving

1.  **Description：**

![](media/596de7f13f36eaf067afacc3a842a0da.png)

Keyestudio Micro：bit robot car is equipped with two DC geared motors.

DC geared motor is integration of reducer and motor, which is widely applied to
steel and machinery industry.

The shield of smart car is inclusive of PCA9685PW and TB6612FNG chip.

In order to save the resources of IO ports, we control the rotation speed and
direction by TB6612FNG chip.

**2. What You Need**

1.  Insert micro:bit board into slot of V2 shield.

2.  Place batteries into battery holder.

3.  Plug smart car in power

4.  Link with computer by USB cable and enter online micro:bit editor.

Import Hex profile [**(How to import?)** ](#_7.6.导入代码), or click“New
Project”and drag blocks step by step(add k-bit extension library first)

[**(How to add k-bit extension?)**](#M11)

**3. Test Code：**

**Code 1：**

Import hex file.

| File Type | Route                                       | File Name           |
|-----------|---------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.17：Motor Driving/Code-1 | microbit-Code-1.hex |

Or you could edit code step by step in the editing area.

1.  Click“Led”→“more”→“led enable false”,

Put it into block“on start”，click drop-down triangle button to select“true”
![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png).

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Basic”→“show arrow North”

Put it into“forever”, and click the triangle button to choose South.

![](media/4d1ddbeb0077fc305ecd77739436bcc5.png)

1.  Enter“K_Bit”→“car RunForward speed : 0 %”

Keep it into“forever”, 0 can be replaced by any number in 0-100，we set to 80.

![](media/94209ee011970b32e5dcc182eaf1df18.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Place“pause (ms) 100”below block “car....80%”block.

    ![](media/edee40d0b75ef53ba4bd5f7f3d2fffd2.png)

2.  Replicate code string![](media/39e41f6cf2278005345dfcb1a8053ac8.png)once.

Then place it into“forever”，click South to choose North and tap RunForward to
select RunBack.

![](media/1bcce3c553ca24578dd5be1328ec0711.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Replicate“show arrow South”once and place it into“forever”，then click South
    to choose East. ![](media/41de4ab5b27439d8e346940865217704.png)

1.  Enter“K_Bit”→“LeftSide motor run Forward speed : 0 %”

Place it into“forever”and set to 20%.

Duplicate “LeftSide motor run Forward speed : 20 %” again and tap LeftSide to
select RightSide.

Change 20 into 80

Copy “pause (ms) 1000” once and keep it below “Rightside....speed 80%”.
![](media/399c166965850ab023c8d8e3ecb5ab7e.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Duplicate code string ![](media/425d05452969d38adf05aa4e37a5e65e.png)once
    and place it into “forever”，

Set to West , speed 80% and speed 20%.

![](media/830d9d23ee0bd7c36308018472f4d216.png)

1.  Copy code string![](media/39e41f6cf2278005345dfcb1a8053ac8.png)twice and
    respectively set to East and West，

Then click RunForward to choose TurnLeft and TurnRight

![](media/473626d96488260cfe45f775e62226e2.png)

1.  Enter“Basic”→“show leds”

Leave it under“pause (ms) 1000” block and tick dark blue box to create
reverse“❤”pattern.

![](media/29b62fbd3237125de70c44db03ac4091.png)

1.  Tap“K_Bit”→“car stop”

Move it and“pause (ms) 1000”into“forever”block.

![](media/5078aa5220b6c70705517dbd55d171d1.png)

Complete Program：

![](media/b2554bf52e87fd6db84eef6897e6775a.png)


Click“JavaScript" to view the corresponding JavaScript code:

![](media/cd367a442327cc8c2605b05d9716c092.png)

**Code 2：**

Hex File:

| File Type | Route                                       | File Name           |
|-----------|---------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.17：Motor Driving/Code-2 | microbit-Code-2.hex |

1.  Click“Led”→“more”→“led enable false”,

Put it into“on start”block，click drop-down triangle button to select“true”
![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png).

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Variables” → “Make a Variable...”→ “New variable name：” dialog box，

Input a and click“OK”to produce variable“a”，

Then create variable“b”in same way

Drag out“set b to 0”block into“on start”and copy it

Click“a”to select“b”

![](media/53415ea0bf2490067f8f70bd77e4c834.png)

1.  Go to“Input”→“on button A pressed”

Enter“Variables”to place“change b by 1”into“on button A pressed” block.

Click“b”to choose“a”

![](media/39498de4dcb936e8a2b8c797cb20a925.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Replicate code string once, click“A”to select“B”

Remove block“change a by 1”

Click“Variables”to drag block“set b to 0”into“on button B pressed”

Then change 0 into 1.

![](media/91c1545a33f45f0af14ebc9edd2e6a68.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“logic”→“if true then...”

Place it into“forever”block.

Then move“=”block into true box

Go to“Variables”variable to move variable“a”into left box of“=”

Change 0 into1

![](media/f7e04a36746c6ad747c9b02214c7dc89.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Basic”to move“show leds”under“if...1 then”block.

    ![](media/9ead6a84f4e443fd7edbb811fd9979e6.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Logic”→“if true then...”

Leave it under block“show leds”

Copy“a=1”block again and keep it into true box

Enter“Variables”to move variable“b”into left box of “=”block.

![](media/cac9459815f822f86c09f66199150cc5.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Then move block“pause (ms) 100”under “if b=1 then” block

Set to 1000ms

Go to“K_Bit”to drag out block“car RunForward speed: 0 %”

Copy“pause (ms) 1000”block again

Then edit the code string as follows:

![](media/0ae2b439bd93b117cecff2b1c6be2336.png)

1.  Replicate code string ![](media/4a05a28f2cd3e33be3fed09330e6ca1e.png)twice
    and place them under“pause (ms) 1000”block.

Edit the code string as follows:

![](media/d094e7aae9fb22ebad1723f4064f50e7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“K_Bit”to move“car stop”block under“pause (ms) 1000”block.

Go to“Variables”to drag block“set b to 0”below block“car stop”.

![](media/d38cad6fe1e4d42d4db2faf7e9f5df97.png)

1.  Go to“Logic”to move block“if true then...”into“forever”

Drag block“=”into true box

Duplicate block “a=1”block again

Place it into true box.

![](media/5a631601a22b870cbb0237575c321d90.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Copy block“show leds”and tick dark blue boxes to generate“口”pattern.

    ![](media/d99566ae2f31603919e46e703df5e3f2.png)

1.  Duplicate“if b=1 then”block once and place it under block“show leds”

![](media/ca5d858dc0abad58c1e0dd8e79267770.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(14) Copy code string![](media/e48e7f2b2194c0e1d742df80f29aa7da.png)block once
and keep it into“if b=1 then”block, and change 620 into 1000, as shown below:

![](media/f3df9c5d1be68a35a5581f83b410cfb0.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(15) Replicate![](media/4a05a28f2cd3e33be3fed09330e6ca1e.png)code string for
five times.

Place the code string into block “if b=1 then” block

Edit and set up the code string as follows

![](media/0662a9bd40ffb2693b6035f86e70c46c.png)

1.  Replicate code string ![](media/bb470bc14848d887de8688ecd71bc0ed.png)once
    and leave it under block“pause(ms) 620”

![](media/a12d98dd7122ba76d4a1922f94612247.png)

1.  Copy “if a=1 then” block once and keep it into“forever”block.

Go to“Variables”to move block“set b to 0”into“if a=1 then”block.

Change b into a, 1 into 3 and 0 into 1.

![](media/ccc42d979643bb5dc9b0656dfc4c805f.png)

Complete Program：

![](media/8245ce6336385684c9e12548cfd28c36.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/0937df3309472073d22662c7da357c7c.png)

![](media/ec0b88dcfb1a273bb343879ebc1599ea.png)

**4.Test Result：**

Download code 1 to micro:bit board, car goes forward for 1s, backward for 1s,
turns left for 1s, turns right for 1s, rotates anticlockwise for 1s, clockwise
for 1 and stops for 1s. And dot matrix displays the corresponding patterns

Download code 2 to micro:bit board, “L”will be shown on dot matrix when A button
is pressed, then press B, the route of smart car is “L”type.

“口”will be displayed when the Button A is pressed again, then press B, the
route of smart car is “口”type.

Remember to turn on the switch at the back of micro:bit car.

Note: In order to prevent right tracking sensor from interfering button B, you
need to use screw driver to screw right line tracking sensor clockwise to turn
off it, because the control pins of controlling button B and right line tracking
sensor are P11

![](media/f7e622ccbca8c91fa7c7f9853c522a87.png)

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

### 18: Line Tracking Smart Car

18.1: Detect Line Tracking Sensor

![](media/81a769b41214847d61628921b85d74ab.png)

1.  **Description：**

The V2 expansion board of keyestudio Micro：bit mini smart robot car comes with
two line tracking elements which adopt TCRT5000 IR tubes.

TCRT5000 IR tube has an IR emitting tube and a receiving tube.

Low level(0) is output when IR transmitting tube emits IR signals to receiving
tube; high level(1) will be output when smart car runs along black line.

**2. What You Need**

1.  Insert micro:bit board into slot of V2 shield.

2.  Place batteries into battery holder.

3.  Plug smart car in power

4.  Link with computer by USB cable and enter online micro:bit editor.

Import Hex profile [**(How to import?)** ](#_7.6.导入代码), or click“New
Project”and drag blocks step by step(add k-bit extension library first) [**(How
to add k-bit extension?)**](#M11)

**3. Test Code：**

**Code 1：**

Import hex file.

| File Type | Route                                                                                  | File Name            |
|-----------|----------------------------------------------------------------------------------------|----------------------|
| Hex file  | ../Makecode Code/6.18：Line tracking sensor/6.18.1: Detect line tracking Sensor/Code-1 |  microbit-Code-1.hex |

Or you could edit code step by step in the editing area.

1.  Click“Advanced”→“Serial”→“serial redirect to USB”

2.  Place it into“on start”

![](media/73b63660eb8f378dea4930f354d04de6.png)

1.  Enter“Advanced”→“Serial”→“serial write value“x”=0”

2.  Leave it into“forever”block.

3.  Go to“Pins”→“digital read pin P0 ”

4.  Move“digital read pin P0”into 0 box

5.  The right tracking sensor is controlled by P12. Then change P0 into P12
    and“x”into“digital signal”.

![](media/93690b140d12f2de15e799aaa18ca9e0.png)

1.  Go to“Basic”→“pause (ms) 100”

2.  Keep it into“forever”block and set to 200ms.

![](media/af967f85a80bcce9907a7d3103a247b2.png)

Complete Program：

![](media/3023470be7dd94b5845331e0774b2a1e.png)

Click“JavaScript"to view the corresponding JavaScript code:

![](media/d7490d0f52a6fbb693de779e81b12ee6.png)

Download code 1 to micro:bit board, don’t plug off USB cable and
click![](media/e310a9105faecbe6ed8400101a4e852d.png)

([How to quick download?](#_7.3.快速下载))

![](media/830072d6e2029a76637886938d22f900.png)

Serial monitor will display low level(0) and D6 indicator will be on when the
right line tracking sensor detects white objects ; when black objects or no
object are detected, 1(high level) will be shown on serial monitor and D6 will
be off, as shown below:

![](media/c8fb471be9d430db24ecc3cc7162850d.png)

Open CoolTerm, click Options to select SerialPort. Set COM port and 115200 baud
rate(the baud rate of USB serial communication of Micro:bit is 115200 through
the test). Click“OK”and“Connect”.

The CoolTerm serial monitor displays the digital signals read by right line
tracking sensor.

![](media/e7703bb10f45bac4033ab44958dcb248.png)

**Code 2：**

Hex File:

| File Type | Route                                                                                     | File Name           |
|-----------|-------------------------------------------------------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.18：Line tracking smart car/6.18.1：Detect line tracking sensor/Code-2 | microbit-Code-2.hex |

1.  Click“Led”→“more”→“led enable false”,

Put it into block“on start”，click drop-down triangle button to
select“true”![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png).

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Variables” →“Make a Variable...”→ “New variable name：” dialog box.

Enter LL and click“OK”to create variable“LL”.

Next to produce variable“RR”in same way.

Drag block“set RR to 0”into“on start”block and copy it once. Then set code
string:![](media/b9ece15dd38d0e45c855b56784e849a6.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Drag“set RR to 0”into“forever”.

Enter“Advanced”→“Pins”→“digital read pin P0”

Put it into 0 box.

Copy block“set RR to digital read pin P0”once and set to“set LL to digital read
pin P0”.

The left tracking sensor is linked with P13, the right sensor is connected to
P12.

Edit the code string as follows:

![](media/d393346904fd9cf306b04ef7f06d01ab.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“Logic”→“if true then...else”

Place it into“forever”and
click“![](media/7498c9151101cb7e9756a8b0a5485f90.png)”twice and move“and” block
into“true”box.

![](media/07648317552bda89f0fd61ca942f1938.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Logic”to drag“=”into left box of“and”block.

Click“Variables”to move out variable“LL”into left box of“=”

Replicate“LL=0”once and leave it into right box of“and”block.

Change LL into RR, 0 into 1. As shown below:

![](media/609331c00c1684197a9fa68fc4e854d9.png)

1.  Click“Basic”→“show leds”

Put it under“if..LL=0..then”block and tick dark blue boxes to produce“I”pattern

![](media/4b6553fc4080824bc3ec632e20957e2a.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Duplicate“LL=0 and RR=1”twice and“show leds”once.

Then edit the code string as follows：

![](media/b334e335145907d47e64c056f035d298.png)

1.  Click“Basic”to place“show icon ❤”under the second“else if..then” block，

Copy it once and click“❤”to select
“![](media/9b22d3e62b501803e3547e84e9445bf5.png)” to leave it under else clock.

![](media/568e715c199ea8dab6efd3198499e76b.png)

Complete Program：

![](media/aaa1b518e463aef56f86c35ab6f0d1df.png)
If the above the condition is not met, the program under else will be executed LED dot matrix shows“❤”



Click“JavaScript" to view the corresponding JavaScript code:

![](media/80f1cbca2ee1c66de6cc959e08771523.png)

**Code 3：**

We could use block“![](media/1dc4bbb19e0ebf13c9f17cce2beba90e.png)”to simplify
code 2. The digital signal read by line tracking sensor is 0(low level) and
1(high level).

Then we transfer the digital signals from line tracking sensor into binary and
decimal system, as shown below:

| Left/Right Line Tracking Sensor（Level） | Binary | Decimal system |   |
|------------------------------------------|--------|----------------|---|
| LOW                                      | HIGH   | 01             | 1 |
| HIGH                                     | LOW    | 10             | 2 |
| HIGH                                     | HIGH   | 11             | 3 |
| LOW                                      | LOW    | 00             | 0 |

Hex File:

| File Type | Route                                                                                     | File Name           |
|-----------|-------------------------------------------------------------------------------------------|---------------------|
| Hex file  | ../Makecode Code/6.18：Line tracking Smart Car/6.18.1：Detect line tracking sensor/Code-3 | microbit-Code-3.hex |

1.  Click“Advanced” →“Serial” →“serial redirect to USB”

Place it into“on start”block.

![](media/73b63660eb8f378dea4930f354d04de6.png)

(2) Click“Variables”→“Make a Variable...”→“New variable name：”dialog box;

Input val and click“OK”to generate variable“val”

Move out“set val to 0”and keep it into block“on start”

![](media/1f2fdc5429f535da4043fcd9230d3e80.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3) Enter“Variables” → “set val to 0”

Keep it into “forever” block

Move“Line Tracking”from“K_Bit”and place it into 0 box

![](media/25edba24da8569a03b56bbd92137bd09.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Advanced”→“Serial”→“serial write value“x”=0”

Put it into“forever”，and move variable “val”into 0 box.

![](media/0ff4b9133dda167863bbf73f6a765d60.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Logic”→“if true then...else”

Move it into“forever” , tap“![](media/7498c9151101cb7e9756a8b0a5485f90.png)”
twice and move out “=” block into “true” block.

![](media/cefbbc412a7a3bf0bde392a2b264a2c5.png)

(6) Enter“Variables”to move block“val”into left box of“=”block

And change 0 into 1.

![](media/bdbfccc903dc4d72dcf8ea68b8873a4c.png)

(7) Enter“Basic” → “show leds”

Place it under block“if..val...then”block

Tick dark blue boxes to generate“I”pattern.

![](media/7019f70d3d2a08dd593450733b5ec21d.png)

(8) Copy block“val=1”twice and separately drag them into boxes behind “else if”.

Then set to“val=2”and“val=3”

Copy“show leds”block once and leave it under the second“else if...then”block.

Tap the dark blue boxes to create“I”pattern, as shown below:

![](media/0341283684db20faa3ae67f95c5dca5f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(9) Go to“Basic”to move block“show icon ❤”below the second“else if
...then”block.

Replicate“show icon ❤”block and click triangle button to
select“![](media/aaa1b518e463aef56f86c35ab6f0d1df.png)”.

Place it into else block.

![](media/c3d83fbd5a4300db4891ac2938147f3e.png)

Complete Program：

![](media/aaa1b518e463aef56f86c35ab6f0d1df.png)
If the above the condition is not met, the program under else will be executed LED dot matrix displays“❤”pattern



Click“JavaScript" to view the corresponding JavaScript code:

![](media/c94a735397b5a09a331e9476b146c1a0.png)

**4. Test Result：**

Download code 2 to micro:bit board,“I”will be shown at left and D2 will be on
when only left line tracking sensor detects white objects.

Remember to turn on the switch at the back of micro:bit car.

When only right line tracking sensor detects white objects,“I”will be displayed
at right and D6 will be on.

micro：bit will display“![](media/aaa1b518e463aef56f86c35ab6f0d1df.png)”when
black objects or no objects are detected

If both of them detect white objects, micro：bit will display“❤”pattern and D2
and D6 light up.

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

Download code 3 to micro:bit board, don’t plug off USB cable and
click![](media/e310a9105faecbe6ed8400101a4e852d.png)

([How to quick download?](#_7.3.快速下载))

![](media/936cc70790090f6553c90be6e0d3edc2.png)

Number will be displayed when only left line tracking sensor detects white
objects.

When only right line tracking sensor detects white objects, number 2 will be
shown.

If both of them detect white objects, number 0 will be shown.

Number 3 will be displayed when black objects or no objects are detected

![](media/ae16b294e536e568527f068f4e9273f1.png)

Open CoolTerm, click Options to select SerialPort. Set COM port and 115200 baud
rate(the baud rate of USB serial communication of Micro:bit is 115200 through
the test). Click“OK”and“Connect”，

CoolTerm serial monitor display the value of decimal system.

![](media/d23e57db56fabd5a0b5c2c7080432a62.jpeg)

18.2: Line Tracking Smart Car

1.  **Description：**

![](media/793e7e798d3b66314dcef86823b0ae33.jpeg)

In this lesson we will combine line tracking sensors with a motor to make a line
tracking smart car.

The micro:bit board will analyze the signals and control smart car to show line
tracking function.

If two line tracking sensors detect black line, the smart car will go
forward；if only left sensor detects black line, robot car will turn left; if
only right sensor detects black line，smart car will turn right；if black line
is not detected, car will stop.

![](media/a16a844427530b0bb8b40e74e08bdf4e.png)

**2. Preparation：**

1.  Insert micro:bit board into slot of V2 shield.

2.  Place batteries into battery holder.

3.  Plug smart car in power

4.  Link with computer by USB cable and enter online micro:bit editor

5.  Import Hex profile[**(How to import?)** ](#_7.6.导入代码), or click“New
    Project”and drag blocks step by step(add k-bit extension library first)

[**(How to add k-bit extension?)**](#M11)

Warning: the line tracking sensor can't work normally under strong light because
of a mountain of invisible light including IR and ultraviolet rays.

1.  **Flow Chart**

| Left/Right line tracking sensor（Level） |  binary | Decimal system  (a) | Line tracking Smart Car |            |
|------------------------------------------|---------|---------------------|-------------------------|------------|
| LOW                                      | HIGH    | 01                  | 1                       | Turn right |
| HIGH                                     | LOW     | 10                  | 2                       | Turn left  |
| HIGH                                     | HIGH    | 11                  | 3                       | Go forward |
| LOW                                      | LOW     | 00                  | 0                       | STOP       |

![](media/a5956ab60f257e247f28fe0659a0febd.png)

1.  **Test Code：**

Import hex file

Hex File:

| File Type | Route                                                            | File Name               |
|-----------|------------------------------------------------------------------|-------------------------|
|  Hex file | ../Makecode Code/6.18：Line tracking Smart Car/6.18.2: Smart Car | microbit- Smart Car.hex |

Or you could edit code step by step in the editing area.

1.  Enter“Basic”→“show icon ♥”

Combine it with“on start” block，and click triangle button to select
“![](media/b9b97ec13c745120243516b57a2f2fbc.png)”.

![](media/4e8ed8afa7457e273982b6f884567de7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click “Neopixel” →“set strip to Neopixel at pin P0 with 24 leds as RGB (GRB
    format)”

Put it into“on start”block，D1 of KEYES-2812-18R module is connected to D5 which
is P5 of micro:bit board.

Click the triangle button to set to P5.

KEYES-2812-18R module comes with 18pcs RGB lights, as such, change 24 into 18.

![](media/c6c6ec3b1914b6ac21ac8c20bfc5812d.png)

1.  Enter“Neopixel”→“strip clear”

Place it into“on start”

![](media/4c1b530c9beb7fe87db5d89e4623e6cc.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“Neopixel”→“strip show rainbow from 1 to 360”

Move it into“forever”block.

![](media/6490bc8eabd2ab2ea0e3d624d7595628.png)

1.  Go to “Variables”→“Make a Variable...”→“New variable name：” dialog box，

Input tracking values and click“OK”to produce variable“tracking values”，

Then drag“set tracking values to 0”from variables

Go to “K_Bit” to move block“Line Tracking”into 0 box

![](media/f70aace635801ceefdbbf4d61f4a6315.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“Logic”→“if true then...else”

Place it into“forever”and click“![](media/7498c9151101cb7e9756a8b0a5485f90.png)”
twice and move“=” block into “true”box.

![](media/ac832a751f058de2d897900633440540.png)

1.  Enter “Variables” to drag“tracking values” block into left box of “=”，and
    change 0 into 1

![](media/9e6a94e611bd1c571d85a301286b3738.png)

1.  Click“K_Bit”→“LeftSide motor run Forward speed: 0 %”

Place it under“if...tracking values=1 then”block

Alter 0 into 40

Copy block“LeftSide motor run Forward speed: 40 %”once and click triangle
buttons to choose RightSide and Back respectively. As shown below:

![](media/3021be8352b0e8be62946897700cc881.png)

1.  Duplicate block“tracking values=1”again.

Leave it into the box of the first“else if ..then”, then change 1 into 2.

![](media/8f63caf9096e76cb78cf7107ced10fca.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Replicate code string ![](media/73b6c0b2332f9db77f6c9e5aeb7dbd60.png)once.

Leave it under“else if...then”block

Set code string as follows:

![](media/d1f250c5e2e462d9c126de5be4054640.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Replicate code“tracking values=2” again and leave it into the second “else
    if..then”block，and change 2 into 3.

![](media/a0e865c882ecbf5272bba634bf856175.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“K_Bit”to drag“car RunForward speed: 0 %”under the second “else
    if....then”block.

Alter 0 into 25

![](media/0d2bd58809c3b8eeb07d73d65fd2ff72.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“K_Bit”to move block“car stop” into else block.

![](media/f76d75e840d5832201f4813acc41bd48.png)

Complete Program：

![](media/b9b97ec13c745120243516b57a2f2fbc.png)
pattern Set strip to Neopixel at pin P5 with 18leds as RGB(GRB format) Turn off RGB lights on the strip The program under the block“forever”runs cyclically. Strip show rainbow from 1 to 360 Set tracking values to the value of decimal system When tracking values=1, the program under“then”block will be executed The left wheels of car move forward at 40% speed The right wheels of car move backward at 40% speed When tracking values=2, the program under“then”block will be executed The left wheels of car move backward at 40% speed The right wheels of car move forward at 40% speed When tracking values=3, the program under then block will be executed Car goes front at 20% speed When the above value of tracking values is not met, the program under else block will be executed Car stops


Click“JavaScript" to view the corresponding JavaScript code:

![](media/0c7b9f84deb7c7a96a04e0adf83d3677.png)

**3. Test Result：**

Download code to micro:bit board and line tracking smart car follows the black
line to move.

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

Note: turn on the switch at the back of micro:bit car.

the width of black tracks should be larger than the distance of two line
tracking sensor.

Avoid to test smart car under the strong light.

### 19: Ultrasonic Follow Smart Car

19.1: Ultrasonic Ranging

**1. Description：**

The HC-SR04 ultrasonic sensor uses sonar to determine distance to an object like
bats do. It offers excellent non-contact range detection with high accuracy and
stable readings in an easy-to-use package. It comes complete with ultrasonic
transmitter and receiver modules.

The HC-SR04 or the ultrasonic sensor is being used in a wide range of
electronics projects for creating obstacle detection and distance measuring
application as well as various other applications.

![](media/7d1365ccda9dfeff4ba6624f9413877c.png)

As the above picture shown, it is like two eyes. One is transmitting end, the
other is receiving end.

The ultrasonic module will emit the ultrasonic waves after trigger signal. When
the ultrasonic waves encounter the object and are reflected back, the module
outputs an echo signal, so it can determine the distance of object from the time
difference between trigger signal and echo signal.

1.  **Working principle ：**

    ![](media/8ff02741199a0f03d8d814a4b72f27d7.png)

2.  Pull down TRIG then trigger high level signals with least 10us

3.  After triggering, the module will automatically send eight 40KHz ultrasonic
    pulses and detect whether there is a signal return.

4.  The propagation speed of sound in the air is about 343m/s; therefore,
    distance = speed \* time, because the ultrasonic wave emits and comes back,
    which is 2 times of distance, so it needs to be divided by 2, the distance
    measured by ultrasonic wave = (speed \* time)/2

**3. Specification：**

-   Working voltage：3-5.5V（DC）

-   Power Supply :+5V DC

-   Working Current: 15mA

-   Working frequency: 40khz

-   Maximum Ranging Distance : around 3m

-   Minimum Ranging Distance: 2-3cm

-   Resolution : 0.3 cm

-   Measuring Angle: ≤15 degree

-   Trigger Input Pulse width: 10uS

-   Accuracy: up to 0.2cm

-   Output echo signal : output TTL level signal(high), which is proportion to
    range.

1.  **Preparation：**

2.  Insert micro:bit board into slot of V2 shield.

3.  Place batteries into battery holder.

4.  Plug smart car in power

5.  Link with computer by USB cable and enter online micro:bit editor

6.  Import Hex profile[**(How to import?)** ](#_7.6.导入代码)**,** or click“New
    Project”and drag blocks step by step(add k-bit extension library first)

[**(How to add k-bit extension?)**](#M11)

1.  **Test Code：**

Import hex file.

| File Type | Route                                                                         | File Name                        |
|-----------|-------------------------------------------------------------------------------|----------------------------------|
|  Hex file | ../Makecode Code/6.19: Ultrasonic Follow Smart Car/6.19.1: Ultrasonic Ranging |  microbit-Ultrasonic Ranging.hex |

Or you could edit code step by step in the editing area.

1.  Tap“Advanced”→“Serial” →“serial redirect to USB”

Combine it with“on start”block

![](media/73b63660eb8f378dea4930f354d04de6.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to “Variables”→“Make a Variable...”→“New variable name：” dialog box，

Input i and click“OK”to produce variable“i”，

Move“set i to 0”from“Variables”and integrate with“on start”block

![](media/c8496884c822fc69da7e46bc4fc91886.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Copy“set i to 0”and keep it into“forever”

![](media/72b73246674e9108049d86185db97b99.png)

Enter“Advanced”→“Serial”→“serial write value x=0”

Leave it into“forever”，

Tap“K_Bit”to move“Ultrasonic”into 0 box.

Change“x”into distance.

![](media/a8360b4e02933f4484130d7c283e6bcf.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“Logic”to find out block“if true then”

Place it into“forever”block，then move out block“=” into true box.

![](media/d0e6c291314e7865e9ae347a6b081d4f.png)

1.  Replicate“Ultrasonic”again and leave it into left box of“=”，

Change“=”into“\<”，and“0”into“10”.

![](media/5afdda8a60e793fc38af6957c36097f6.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Loops”→“while true do”

Leave it under“if ultrasonic...then”block.

Then copy“=”block and leave it into true box.
![](media/6224f4a49dde4ccf2b5e6d22965477fc.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Move“Variables”to drag variable“i”into left box of“=”，

Click“=”to select“\<”，and change 0 into 1

![](media/30f667005e551fe3e872536865c9f237.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Music”to move block “play tone Middle C for 1 beat” into do block，

Move out“pause(ms)100”to choose 200.

![](media/733a3ad2b53956c7d54a6c43d07b1ff8.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Replicate code string![](media/317c92123340c396e189314146ea318f.png)once and
    keep it into “do” block

![](media/3667fca618bf9e6aa218b985a717f23f.png)

1.  Move“change i by 1”from“Variables”and place it under “pause(ms) 200”
    ![](media/10374fbc53f9b82f81ce9306f4f0a0c2.png)

Complete Program：

![](media/50d5c3d5a0fa4e841dbc70927a71b068.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/3a01397a06ea41718324e0a5236a2b83.png)

1.  **Test Result：**

Download code to micro:bit board, don’t plug off USB cable

Turn on the switch at the back of micro:bit car

Click![](media/e310a9105faecbe6ed8400101a4e852d.png)

([How to quick download?](#_7.3.快速下载))

![](media/2cd74c16ab3623f6752d3f5e59deea2e.png)

The monitor shows the distance between the obstacle and ultrasonic sensor(as
shown below). When the distance is less than 10cm, the passive buzzer of smart
car emits sound.

![](media/422adea3e04563f038f7f28cd40efb2d.png)

Open CoolTerm, click Options to select SerialPort. Set COM port and 115200 baud
rate(the baud rate of USB serial communication of Micro:bit is 115200 through
the test). Click“OK”and“Connect”.

CoolTerm serial monitor displays the distance value as follows:

![](media/c88ce484a935653373de5cdf72c727ed.png)

19.2: Ultrasonic Follow Smart Car

![](media/fd2f5e910e2ea77331bc82142fd08659.jpeg)

**1. Description：**

In previous lesson, we’ve learned the basic principle of line tracking sensor.
Next, we will combine ultrasonic sensor with car shield to make an ultrasonic
follow car.

**2. Preparation：**

1.  Insert micro:bit board into slot of V2 shield.

2.  Place batteries into battery holder.

3.  Plug smart car in power

4.  Link with computer by USB cable and enter online micro:bit editor

5.  Import Hex profile [**(How to import?)** ](#_7.6.导入代码), or click“New
    Project”and drag blocks step by step(add k-bit extension library first)

[**(How to add k-bit extension?)**](#M11)

**3. Flow Chart：**

![](media/f6fcf149f81ad386e0f9bdbe69b5ba52.png)

1.  **Test Code：**

Import hex file.

| File Type | Route                                                                                  | File Name                                |
|-----------|----------------------------------------------------------------------------------------|------------------------------------------|
|  Hex file | ../Makecode Code/6.19：Ultrasonic Follow Smart Car/6.19.2：Ultrasonic Follow Smart Car | microbit-Ultrasonic Follow Smart Car.hex |

Or you could edit code step by step in the editing area.

1.  Enter“Basic” →“show icon ♥”

Place it into“on start”and click the triangle button to
select“![](media/b9b97ec13c745120243516b57a2f2fbc.png)” pattern.

![](media/4e8ed8afa7457e273982b6f884567de7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  a. Enter “Neopixel” →“set strip to Neopixel at pin P0 with 24 leds as RGB
    (GRB format)”

b. Place it into“on start”block，

c. Signal end D1 of KEYES-2812-18R module is connected to D5(P5 of micro:bit
board) of expansion . So we set to P5.

d. KEYES-2812-18R module comes with 18 pcs WS2812 RGB, then change 24 into 18.

![](media/c6c6ec3b1914b6ac21ac8c20bfc5812d.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Tap“Neopixel”→“strip clear”

Keep it into“on start”block.

![](media/4c1b530c9beb7fe87db5d89e4623e6cc.png)

1.  Go to“Variables”→“Make a Variable...”→“New variable name：” dialog box，

Input distance and click“OK”to produce variable“distance”，

Drag out“set distance to 0”into“on start”

![](media/b61f60408a0005671a3ae079d5264e87.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Variables”to move out“set distance to 0”

Keep it below block “strip clear”block.

Click“K_Bit”to drag block“Ultrasonic”into 0 box.

![](media/b45bf0e3b9f2f27746d8aa30403ff0ab.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“Logic”to move out“if true then”into“forever”,

Then place“and”block into true box.

![](media/adda3c734eea6a4c601d4e04fcab9b97.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Logic”to move out“=”into left box of and block

Move out variable“distance”into left box of“=”block

Change“=”into“≥”and 0 into 10.

Replicate“distance≥10”once and leave it into right box of“and”block.

Then we set distance ≤30

![](media/2c92a98125904b86eea6d695cdaf5b9a.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“K_Bit”→“car RunForward speed: 0 %”

Leave it under“if...30 then” block. Then change 0 into 40.

Go to“Neopixel” →“strip show color red”

Place it under“car RunForward speed: 40 %”block.

![](media/1f2e2eba8fb03d05b8aab2f5f16f5a4c.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Duplicate code string ![](media/5484b90ad01242b443a3c1fbdc429031.png)once
    and keep it into “forever”，

Delete block“distance≥10”and“and”block，

Change 30 into 6, RunForward into RunBack and red into yellow.

![](media/22f7f20d047541e7f476a13865a0e421.png)

1.  Copy code string ![](media/70688956870d94febbf9467e54882236.png)once and
    place it into“forever”，

Delete block“distance≤6”and“car RunBack speed: 40 %”

Go to“Logic”to drag out block“or”into true box，

Move block“and”into left box of“or”block，

Replicate block“distance≤6”once and place it into left box of“and”block，

Change“≤”into“\>”，and duplicate block “distance≥10”once and move into right box
of“and”，

Change“≥”into“\<”，and copy block“distance≤30”once and drag into right box
of“or”，

Change“≤”into“\>”，and move block“car stop”from“K_Bit”

Keep“car stop”block under“if...then”block

Alter yellow into white.

![](media/47b5196cf6723956c5e777caa6efe579.png)

Complete Program：

![](media/b9b97ec13c745120243516b57a2f2fbc.png)”图案。

.③将strip设为引脚P5初始化灯带18颗LED（模式RGB（GRB顺序））

.④Turn off RGB lights on the strip

.⑤将变量distance设为0

.⑥The program under the block “forever” runs cyclically.

.⑦将变量distance设为超声波传感器读取的距离值。

.⑧当10cm≤distance≤30cm成立时，执行then →程序

.⑨小车以40%速度前进

.⑩strip上18个RGB都亮红色灯

.⑪当distance≤6cm成立时，执行then →程序

.⑫小车以40%速度后退

.⑬strip上18个RGB都亮黄色灯

.⑭当6cm\<distance\<10cm或distance\>30cm成立时，执行then →程序

.⑮小车停止

.⑯strip上18个RGB都亮白色灯

.①“on start”: command block runs once to start program.

.②LED dot matrix显示“![](media/b9b97ec13c745120243516b57a2f2fbc.png)”图案。

.③将strip设为引脚P5初始化灯带18颗LED（模式RGB（GRB顺序））

.④Turn off RGB lights on the strip

.⑤将变量distance设为0

.⑥The program under the block “forever” runs cyclically.

.⑦将变量distance设为超声波传感器读取的距离值。

.⑧当10cm≤distance≤30cm成立时，执行then →程序

.⑨小车以40%速度前进

.⑩strip上18个RGB都亮红色灯

.⑪当distance≤6cm成立时，执行then →程序

.⑫小车以40%速度后退

.⑬strip上18个RGB都亮黄色灯

.⑭当6cm\<distance\<10cm或distance\>30cm成立时，执行then →程序

.⑮小车停止

.⑯strip上18个RGB都亮白色灯

Click“JavaScript" to view the corresponding JavaScript code:

![](media/b35ab03c83550713f39dd14d6bdc5405.png)

**4. Test Result：**

Download code on micro:bit board, and turn on the switch at the back of
micro:bit car.

The smart car follows the obstacle to move. And 18 pcs RGB lights emit different
color.

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

### 20: Obstacle Avoidance and Follow Smart Car

20.1: Obstacle Avoidance Function

**1. Description：**

![](media/cdd665626233e3f8e9db635fd8fd093d.png)

The shield of smart car comes with two IR obstacle avoidance sensors which adopt
transmitting tube and receiving tube.

The IR rays will reflect back to receiving tube if there is an obstacle. Next,
sensor will determine the obstacle and send test result to microcontroller.

After a series of processing analysis, the smart car will avoid the obstacle.

The low level (0) will be output when the obstacle is detected, otherwise, the
high level(1) will be output

IR obstacle avoidance sensor is generally applied to obstacle avoiding, line
tracking, anti-falling, counter and production line cutting and liquid level
detection, etc

**2. What You Need**

1.  Insert micro:bit board into slot of V2 shield.

2.  Place batteries into battery holder.

3.  Plug smart car in power

4.  Link with computer by USB cable and enter online micro:bit editor

5.  Import Hex profile[**(How to import?)** ](#_7.6.导入代码)**,** or click“New
    Project”and drag blocks step by step(add k-bit extension library first)

[**(How to add k-bit extension?)**](#M11)

**3. Test Code：**

**Code 1：**

Import hex file

| File Type | Route                                                                                                      | File Name            |
|-----------|------------------------------------------------------------------------------------------------------------|----------------------|
|  Hex file | ../Makecode Code/6.20：Obstacle Avoidance and Follow Smart Car/6.20.1：Obstacle Avoidance Function /Code-1 |  microbit-Code-1.hex |

Or you could edit code step by step in the editing area.

1.  Click“Advanced”→“Serial”→“serial redirect to USB”

Keep it into“on start”block

![](media/73b63660eb8f378dea4930f354d04de6.png)

1.  Enter“Advanced”→“Serial”→“serial write value“x”=0”

Place it into“forever”block

![](media/30de266eca1a75cf326304be372dbc37.png)

1.  Go to“K_Bit”→“LeftSide obstacle sensor”

Move it into 0 box and change“x”into“digital signal”.

![](media/5ca6d040ef66dd8f27bab46b3cd970eb.png)

1.  Go to“Basic”→“pause (ms) 100”,

Place it into“forever”，and set to 200ms

![](media/4d834b71d3e628765743d25193620080.png)

Complete Program：

![](media/4282ea112d44ff9c43bf1c2e1ae92a6d.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/157ca96ce7d5425d180b0eb52f253ada.png)

Download code on the micro:bit board, and don’t plug off USB cable.

Click the button![](media/6632c005a8cee0c83c85e27d2a698b41.png)

([How to quick download?](#_7.3.快速下载) )

![](media/d1048e2dedb6bb757e2fccb7354db6f5.png)

The digital signals detected by left IR obstacle avoidance sensor. When it
detects the obstacle, the signal end outputs low level(0) and SIG1 lights on;
when no obstacle is detected, the signal end outputs high level(1).

![](media/fdbeb3b157ee7f9619e26bf32f066776.png)

Open CoolTerm, click Options to select SerialPort. Set COM port and 115200 baud
rate(the baud rate of USB serial communication of Micro:bit is 115200 through
the test). Click“OK”and“Connect”

CoolTerm monitor displays the digital signals detected by left IR obstacle
avoidance sensor, as show below:

![](media/e7703bb10f45bac4033ab44958dcb248.png)

**Code 2：**

Hex File:

| File Type | Route                                                                                                 | File Name            |
|-----------|-------------------------------------------------------------------------------------------------------|----------------------|
|  Hex file | ../Projects/6.17：Obstacle Avoidance and Follow Smart Car/6.17.1：Obstacle Avoidance Function /Code-2 |  microbit-Code-2.hex |

1.  Click“Led”→“more”→“led enable false”

Put it in the block“on start”，and click drop-down triangle button to
select“true” ![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png).

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“Logic”→“if true then...else”

Place it into“forever”and click“![](media/7498c9151101cb7e9756a8b0a5485f90.png)”
twice and move“and”block into“true”box.

![](media/2497706452e8350ce43382fe9b806e46.png)

1.  Tap“Logic”to drag block“=”into left box of“and”.

Click“K_Bit”to move“LeftSide obstacle sensor”into left box of “=” block

Then copy“LeftSide obstacle sensor=0”again

And leave it into right box of“and”block

Change LeftSide into RightSide.

![](media/11c89aa5fb2eb534290afb009afeabcd.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Tap“Basic”to drag out block“show icon ❤”

Leave it under“if...then”block and click the triangle button to
select“![](media/c0e3d86925a1aa0f07d9aca06b315de4.png)” pattern.

![](media/560b87ade87fd5e5399d49b2f8003b96.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Copy block“LeftSide obstacle sensor=0 and RightSide obstacle sensor=0”once
    and place it into“else if....then”block，and set Rightsite obstacle sensor
    =1.

![](media/a9fe945f33c4393d44e9499214221a67.png)

1.  Click“Basic”→“show leds”

Keep it under “else if...then” block and tick dark blue boxes to create “→”
pattern.

![](media/b8e7c364ebaa13bf495e131bfc84777d.png)

1.  Replicate code“LeftSide obstacle sensor=0 and RightSide obstacle
    sensor=0”again.

Set to“LeftSide obstacle sensor=1 and RightSide obstacle sensor=0”

Leave it into the second“else if...then”block.

![](media/eb36a8d213703a885eb5427e6e849883.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Copy block“show leds”twice and place them under the second block“else
    if...then”and“else”.

Tick dark blue boxes to produce“←”and“↑”pattern.

![](media/1a5761a126d0584b292f4a4a7132f3c1.png)

Complete Program：

![](media/c0e3d86925a1aa0f07d9aca06b315de4.png)
When LeftSide obstacle sensor=0 and RightSide obstacle sensor=1，the next program will be activated LED dot matrix displays“→” When LeftSide obstacle sensor=1 and RightSide obstacle sensor=0，the next program will be activated LED dot matrix shows“←” If the above conditions are not met,. the program under else will be activated LED dot matrix shows“↑”

Click“JavaScript" to view the corresponding JavaScript code:

![](media/72b43c70c27dcd3ba8597dc51ab64491.png)

**4. Test Result：**

Download code 2 to micro:bit board and turn on the switch at the back of
micro:bit car.

When only left obstacle avoidance sensor detects the obstacle, the leftward
arrow pattern is shown.

When only right obstacle avoidance sensor detects the obstacle, the rightward
arrow pattern is displayed.

When both of them detect the obstacle, the smile face pattern appears, however,
none of them detects the obstacle, the upward arrow is shown.

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

20.2: Obstacle Avoidance Smart Car

1.  **Description：**

![](media/50bb9fec75b30364412930f055365e9d.jpeg)

We’ve learned the knowledge of obstacle avoidance sensor. In this project, we
will integrate ultrasonic sensor, IR obstacle avoidance sensor and car expansion
board to make an obstacle avoidance smart car.

Its principle is to detect the distance between the car and obstacle by
ultrasonic sensor and IR obstacle avoidance sensors and control the motion of
smart car.

Left obstacle avoidance sensor is controlled by P2 and right one is decided by
P11

1.  **Preparation：**

2.  Insert micro:bit board into slot of V2 shield.

3.  Place batteries into battery holder.

4.  Plug smart car in power

5.  Link with computer by USB cable and enter online micro:bit editor

6.  Import Hex profile [**(How to import?)** ](#_7.6.导入代码)**,** or click“New
    Project”and drag blocks step by step(add k-bit extension library first)

[**(How to add k-bit extension?)**](#M11)

Warning: the obstacle avoidance sensor can't work normally under strong light
because there is a mountain of invisible light including IR and ultraviolet
rays.

3\. Flow Chart

![](media/1dfe33af8eb002ec9246a529161aec88.png)

**4. Test Code：**

Import hex file.

| File Type | Route                                                                                               | File Name                                 |
|-----------|-----------------------------------------------------------------------------------------------------|-------------------------------------------|
| Hex file  | ../Makecode Code/6.20：Obstacle Avoidance and Follow Smart Car/6.20.2：Obstacle Avoidance Smart Car | microbit-Obstacle Avoidance Smart Car.hex |

Or you could edit code step by step in the editing area.

1.  a. Enter“Neopixel” →“set strip to Neopixel at pin P0 with 24 leds as RGB
    (GRB format)”

b. Place it into“on start”block，

c. Signal end D1 of KEYES-2812-18R module is connected to D5(P5 of micro:bit
board) of expansion . So we set to P5.

d. KEYES-2812-18R module comes with 18 pcs WS2812 RGB, then change 24 into 18.

![](media/f0b7235d36487d77fb5c447dfcbb9bde.png)

1.  Go to“Variables”→“Make a Variable...”→“New variable name：” dialog box，

2.  Input“distance”and click“OK”to produce variable“distance”.

Move“set distance to 0”and edit this code as follows:

![](media/a99ddabd4ad063541fecca1ecab570e6.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Then we generate variable“val_L”and“val_R”in same way.

Drag out“set val_R to 0”block and copy it twice

Separately set to distance, val_L and val_R and place them into“forever” block.

Go to“K_Bit”to move out“Ultrasonic”and“LeftSide obstacle sensor”

Copy “LeftSide obstacle sensor”once and place them into code string as follows:

![](media/91c8dcdd4cc76ef00d14052f5d841e63.png)

1.  Enter“Logic”→“if true then...else”

Place it into“forever”and
click“![](media/7498c9151101cb7e9756a8b0a5485f90.png)”for four times and
move“and” block into“true”box.

![](media/60941a45588dcaf5af78396a33d434c5.png)

1.  Click“Logic”and drag“=”block into left box of“and”block

Go to“Variables”to move“val_L” into left box of“=”block and copy

“val_L=0”block once.

Click triangle button to select val_R

Place“val_R=0”into right box of and block.

![](media/dd2e320efdee6f833e91cb15ba8be2d2.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“K_Bit”→“car RunForward speed：0%”

Set to 40% and click triangle button to select RunBack

Click“Neopixel”→“strip show color red”

And leave it below block“car...40%”block.

Move“pause(ms)100”block under block“strip show color red”block.

Copy block“car Runbank speed:40%”and“pause(ms)100”block

Change Runbank into Turnleft and 40% into 20% and delay in 200ms

Edit code string as follows:

![](media/648d8fb2e78f4518c867de3fa47258d4.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Replicate block“val_L=0 and val_R=0”once

Place it into block the first“else if...then”block

![](media/b096f84f001ed30d54f6438c58a92fcd.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Replicate block“car TurnLeft speed：20%”and“strip show color red”again.

Change red into purple.

![](media/734c3c299f14881ae6a3d90ab92859ab.png)

1.  Duplicate block“val_L=0 and val_R=0”once

Place it into the second“else if..then”block.

Copy ![](media/1061931fcfe84dd2af6a394f124530cb.png) code string once and leave
it under the second“else if...then”block.

Change TurnLeft into TurnRight , 0 into 1 and purple into yellow.

![](media/7d385ef705c5be716a1cdc251c95655d.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Logic”to drag“and”block into box behind the third “else if
    ....then”block

Move“=”block into left box of“and”block.

Enter“Variables”to drag variable“distance”into left box of “=”block

Change“=”into“≤”and 0 into 10.

Move“val_L=0 and val_R=0”into right box of “and” block

Then set to“val_L=1 and val_R=1”

![](media/1299fec36b96fe0bb47358fd5724be4f.png)

1.  Duplicate code string ![](media/f2d24010a3f41df791dc558802b14551.png)once
    and leave it under the third“else if...then”block.

Change yellow into blue.

![](media/de60a00a0a84e9ec29a49379574aefe5.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Duplicate“distance≤10 and val_L=1 and val_R=1”once

Replicate block“distance≤10 and val_L=1 and val_R=1”once and put it into the
fourth“else if...then”block.

Change“≤”into“\>”

![](media/e0c033250a776b7719937f7b6fc19cff.png)

1.  Duplicate code string ![](media/26568673c77339038232c21ba4445209.png)once
    and keep it under the fourth“else if...then”block.

Change TurnRight into RunForward, 20 into 40 and blue into green.

![](media/238c15ea78cb25dcb8fb88867feace69.png)

Complete Program：

![](media/2036f40bc930fcc7e0019d9f62a54f15.png)

![](media/013bd3a679f7bfe555d7d5c4fe04de36.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/17421cef67f61047d565758dfc6b7aa9.png)

1.  **Test Result：**

Download test code to micro:bit and turn on the switch at the back of micro:bit
car.

The smart car will avoid the obstacle.

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

6.20.3: Following Smart Car

**1. Description：**

![](media/fa31aba3ce37dc5786dedac6cdd16ade.jpeg)

In this chapter, we will integrate ultrasonic sensor, IR obstacle avoidance
sensor and car expansion board to make a multi-directional follow smart car. Its
principle is to detect the distance between the car and obstacle by ultrasonic
sensor and IR obstacle avoidance sensors and control the motion of smart car.

1.  **Preparation：**

(1) Insert micro:bit board into slot of V2 shield.

(2) Place batteries into battery holder.

(3) Plug smart car in power

(4) Link with computer by USB cable and enter online micro:bit editor

(5) Import Hex profile[**(How to import?)** ](#_7.6.导入代码), or click“New
Project”and drag blocks step by step(add k-bit extension library first)

[**(How to add k-bit extension?)**](#M11)

Warning: the obstacle avoidance sensor can't work normally under strong light
because there is a mountain of invisible light including IR and ultraviolet
rays.

1.  **Flow Chart：**

![](media/50eb6365f838219cddd3a5948cc10995.png)

1.  **Test Code：**

Import hex file.

| File Type | Route                                                                                      | File Name                        |
|-----------|--------------------------------------------------------------------------------------------|----------------------------------|
| Hex file  | ../Makecode Code/6.20：Obstacle Avoidance and Follow Smart Car/6.20.3：Following Smart Car | microbit-Following Smart Car.hex |

Or you could edit code step by step in the editing area.

1.  a. Enter“Neopixel”→“set strip to Neopixel at pin P0 with 24 leds as RGB (GRB
    format)”

b. Place it into“on start”block，

c. Signal end D1 of KEYES-2812-18R module is connected to D5(P5 of micro:bit
board) of expansion . So we set to P5.

d. KEYES-2812-18R module comes with 18 pcs WS2812 RGB, then change 24 into 18.

![](media/f0b7235d36487d77fb5c447dfcbb9bde.png)

![](media/d48c96b14130c740c82cc0491018ea29.png)

1.  Go to“Variables”→ “Make a Variable...”→“New variable name：” dialog box，

Input“distance”and click“OK”to produce variable“distance”.

Then we generate variable“val_L”and“val_R”in same way.

Drag out“set val_R to 0”block and copy it twice

Separately set to distance, val_L and val_R and place them into“forever” block.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Duplicate code string ![](media/a83fc091f70e2b5684b4705f102d8d33.png)once
    and leave it into“forever”.

Click“K_Bit”to move out“Ultrasonic”and“LeftSide obstacle sensor”

Copy “LeftSide obstacle sensor”again

Leave them into 0 boxes as follows and edit code string.

![](media/91c8dcdd4cc76ef00d14052f5d841e63.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“Logic”→“if true then...else”

Place it into“forever”and
click“![](media/7498c9151101cb7e9756a8b0a5485f90.png)”for four times and
move“and” block into“true”box.

Copy“and”block twice and separately leave them into both side of “and”block.
![](media/e9baace8fa1f9d22231391c4070d70e6.png)

1.  Go to“Logic”to move out“=”block and leave it into left box of “and” block.

Then go to “Variables” to drag out variable“distance”into left box of “=” block

Change“=”into“\>”, 0 into 3; then replicate“distance\>3”block for three times

Place them into boxes and edit code as follows:

![](media/a89a6206f779b7c6b3ae289e56190d20.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Move out“car stop”from“K_Bit”

Click “Neopixel”to drag block“strip show color red”into “if....then” block.

![](media/bc0ba9f1c46d66bfd98d3fc7e4c9c3ae.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“Logic”to drag out block“or”into box of“else if....then”block

Copy block“distance≤6”again and keep it into left box of “or”block.

Change 6 into 3

Replicate“val_L=1 and val_R=1”once and leave it into right box of “or”block

Change 1 into 0

![](media/dc07b62dfdd87de085b99d86313f93a6.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“K_Bit” to move block“car RunForward speed: 0%” under the first“else
    if....then”block.

Change RunForward into RunBack and 0 into 30

Copy“strip show color red”once and set to purple

![](media/2407980433138aa8bd173da5a9f4c1ef.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Copy“distance≤3 or val_L=0 and val_R=0”once and leave it into box of the
    second“else if.....then”

Change“≤”into“\>”, or into and, 3 into 6, and 0 into 1.

![](media/2595eeeeb024be17aa34ab8c94794ffc.png)

1.  Copy code string ![](media/33841fbed7ab41bd42044c82e230f19d.png)once and
    leave it into boxes under the second“else if...then”block

Change RunBack into RunForward and purple into blue.

![](media/529ea28ff109a250b232723d8bb23d5c.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Duplicate the block“val_L=1 and val_R=1”once and keep it into box of the
    third “else if ...then”block

Alter left 0 into 1.

![](media/4e065ecbc32d4fd90e11cd1d2f451f6a.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Copy code string ![](media/a26a31f5b885b76c0e846e3593caa760.png)once and
    leave it under the third “else if ....then”block.

Change RunForward into TurnLeft and blue into green.

![](media/a218da34eb3d9d40690de91d49c89bb1.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Copy the block“val_L=0 and val_R=1”and place it into box of the fourth“else
    if...then”block

Change left 0 into 1, and right 1 into 0

![](media/35895bb7be6b055070d4b0e9c26b95c6.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Duplicate code string ![](media/08dd7663ba19955e97b976ac70cf58a1.png)once
    and leave it under the fourth“else if....then”block.

Alter TurnLeft into TurnRight and green into yellow.

![](media/6781e8d15fa5434a046f6643e40e721e.png)

1.  Copy code string![](media/f0fb3da29d2ea4ef72dfb8ff81c88287.png)once and
    place it under“else” block

![](media/98ba1e568efce25c00a067e169a1257c.png)

Complete Program：

![](media/7fa5446b52244e27f2e3b2dbf869cbd1.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/bc4add813b3d19085e044646ea64ea9f.png)

1.  **Test Result：**

Download the code to micro:bit board and turn on the switch at the back of
micro:bit car.

Car will follow the obstacle to move.

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

### 21: IR Remote Control Smart Car

21.1: Decode IR Remote Control

1.  **Description：**

![](media/1961c28e1ab1f3e1d24a61ce3c673756.png)

There is no doubt that infrared remote control is ubiquitous in daily life. It
is used to control various household appliances, such as TVs, stereos, video
recorders and satellite signal receivers. Infrared remote control is composed of
infrared transmitting and infrared receiving systems, that is, an infrared
remote control and infrared receiving module and a single-chip microcomputer
capable of decoding.​

![](media/9980b41f57feddc2e8a9c0346afaaea9.png)

The 38K infrared carrier signal emitted by remote controller is encoded by the
encoding chip in the remote controller. It is composed of a section of pilot
code, user code, user inverse code, data code, and data inverse code. The time
interval of the pulse is used to distinguish whether it is a 0 or 1 signal and
the encoding is made up of these 0, 1 signals.

The user code of the same remote control is unchanged. The data code can
distinguish the key.

When the remote control button is pressed, the remote control sends out an
infrared carrier signal. When the IR receiver receives the signal, the program
will decode the carrier signal and determines which key is pressed. The MCU
decodes the received 01 signal, thereby judging what key is pressed by the
remote control.  
Infrared receiver we use is an infrared receiver module. Mainly composed of an
infrared receiver head, it is a device that integrates reception, amplification,
and demodulation. Its internal IC has completed demodulation, and can achieve
from infrared reception to output and be compatible with TTL signals.
Additionally, it is suitable for infrared remote control and infrared data
transmission. The infrared receiving module made by the receiver has only three
pins, signal line, VCC and GND.

1.  **Specification：**

Operating Voltage: 3.3-5V（DC）

Interface: 3PIN

Output Signal: Digital signal

Receiving Angle: 90 degrees

Frequency: 38khz

Receiving Distance: about 5m

**3. What You Need**

1.  Insert micro:bit board into slot of V2 shield.

2.  Place batteries into battery holder.

3.  Plug smart car in power

4.  Link with computer by USB cable and enter online micro:bit editor

5.  Import Hex profile [**(How to import?)** ](#_7.6.导入代码), or click“New
    Project”and drag blocks step by step(add k-bit extension library first)

[**(How to add k-bit extension?)**](#M11)

1.  **Test Code：**

Import hex file.

| File Type | Route                                                                                | File Name                             |
|-----------|--------------------------------------------------------------------------------------|---------------------------------------|
| Hex file  | ../Makecode Code/6.21：IR Remote Control Smart Car /6.21.1：Decode IR Remote Control | microbit-Decode IR Remote Control.hex |

Or you could edit code step by step in the editing area.

1.  Click“Advanced”→“Serial”→“serial redirect to USB”

Place it into“on start”block.

![](media/73b63660eb8f378dea4930f354d04de6.png)

1.  Enter“IrRemote”→“connect IR receiver at P0”

Put it into“on start”block

IR receiving module is controlled by P16 of micro:bit board, so click P0 to
select P16.

![](media/dbc5efb9b97f4772c1edb506f1b39d37.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Variables”→“Make a Variable...”→ “New variable name：” dialog box，

Enter“val”and click“OK”to create variable“val”

Then drag out“set val to 0”block into“forever”block.

![](media/ca51f70bf8729f83310f70471bf1b64a.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Ir Remote”→“IR button”

Place it into 0 box

![](media/85bff59d45d6defe248bd5c82c4b7078.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Advanced”→“Serial”→“serial write value“x”=0”

Put it into“forever”block

Change“x”into“IR”

Enter“Variables”to move block“val”into 0 box behind“=”

![](media/736e85fd87be88896e185cc61373f69e.png)

1.  Drag out block“pause (ms) 100”from“Basic” and delay in 1000ms

Leave it into“forever”block![](media/407dccc26a2a9e0e07d0436591cd99bd.png)

Complete Program：

![](media/82a8c9142dad55cdc576391881f302b0.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/58a955f905ac4f504cebcdc9cdf334ca.png)

Code explanation: when the buttons are not pressed, the serial monitor
constantly shows 0; when pressed, the corresponding key values are displayed.

**Note：**

The remote control in this kit is not inclusive of batteries. We recommend you
to purchase them (battery type:CR2025).

Make sure IR remote is good before test. There is a tip for you to check it.

Open the cellphone camera , make IR remote control point at camera and press
button. The remote control is good if you see the flashing light in the camera.

Download code to micro: bit board and don’t plug off USB cable
Click![](media/1f02508d0c79cd976c673a6a5daba648.png)

([How to quick download?](#_7.3.快速下载))

![](media/e7bf712e0c8bedc4b0423427848fa395.png)

Make IR remote control point at IR receiver and press the button, the serial
monitor will display the corresponding key values, as shown below：

![](media/c7a33a4cc9d6decbf9b653d91bcb5318.png)

Open CoolTerm, click Options to select SerialPort. Set COM port and 115200 baud
rate(the baud rate of USB serial communication of Micro:bit is 115200 through
the test). Click“OK”and“Connect”.

CoolTerm serial monitor shows the key value as follows:

![](media/a2c59f8119f9b1659c2bb40833836430.jpeg)

The key value is displayed as for your reference:

![](media/a52aed8032b82cd11c95f34eea8a2a29.jpeg)

21.2: IR Remote Control

1.  **Description：**

![](media/d1e8ea6b3a8ac333b9a9dc71e7925167.jpeg)

In this project, we combine IR remote control with car shield to make an IR
remote smart car. Its principle is to control the motion of car by sending key
signals from IR remote control to IR receiving module of car shield.

**2. What You Need**

1.  Insert micro:bit board into slot of V2 shield.

2.  Place batteries into battery holder.

3.  Plug smart car in power

4.  Link with computer by USB cable and enter online micro:bit editor

5.  Import Hex profile [**(How to import?)** ](#_7.6.导入代码), or click“New
    Project”and drag blocks step by step(add k-bit extension library first)

[**(How to add k-bit extension?)**](#M11)

1.  **Flow Chart**

![](media/d9fde5991bcdb139da1d55d35c180f61.png)

1.  **Test Code:**

Import hex file.

| File Type | Route                                                                        | File Name                        |
|-----------|------------------------------------------------------------------------------|----------------------------------|
|  Hex file | ../Makecode Code/6.21：IR Remote Control Smart Car/6.21.2：IR Remote Control |  microbit-IR Remote Control .hex |

Or you could edit code step by step in the editing area.

1.  Enter“IrRemote”to get block“connect IR receiver at P0”

Put it into“on start”block

IR receiving module is controlled by P16 of micro:bit board, so click P0 to
select P16.

![](media/ae471bfb344025008476e811d4d03b80.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  a. Enter “Neopixel”→“set strip to Neopixel at pin P0 with 24 leds as RGB
    (GRB format)”

b. Place it into“on start”block，

c. Signal end D1 of KEYES-2812-18R module is connected to D5(P5 of micro:bit
board) of expansion . So we set to P5.

d. KEYES-2812-18R module comes with 18 pcs WS2812 RGB, then change 24 into 18.

![](media/ad08e55da968181991ffac7dd5588db4.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Variables”→“Make a Variable...”→“New variable name：”dialog box.

Enter“val”and click“OK”to produce variable“val”

Move“set val to 0”under“set strip...RGB(RGB format)” block

Then create variable“val2”in same way

Drag“set val2 to 0”into“on start”

Edit the code as follows:

![](media/bb9a60d846f91b0ec964a04d471325fc.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Copy“set val2 to 0”once and move it into“forever”block.

Click the triangle button to select“val”

Go to“IrRemote”to drag block“IR button”into 0 box.

![](media/cb2d715c478a5e5a45c5bd290d934bb0.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“Logic”→“if true then”and place it into“forever”

Drag block“=”block into“true”box

Go to“Variables”and move“val”block into left box of“=”.

Then click“=”to set“≠”

![](media/bd0c5a825a3ec489771cd94f66bf4eeb.png)

1.  Duplicate“set val2 to 0”block again and leave it under the block
    “if...val...then”block.

Then drag out variable“val”into 0 box.

![](media/c7113c934b0ab15ada6402db27fd2a12.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Logic”to drag block“if. true..then...else”under block“set val2 to
    val”block.

Then tap“![](media/a7c5c78217692a965e679b2439ab2f3a.png)”four times and
delete“![](media/0fcc5d6332012fed7361a075bd60751f.png)”behind“else”

Move“=”block into“true”box.

![](media/472e74c957d8646cf1d8d0f691f00f24.png)

1.  Go to“Variables”to move block“val2”into left box of“=”

Change 0 into 70.

![](media/b56abcb30b725bdd5d9d638d6af51dad.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Enter“K_Bit”→“car RunForward speed: 0%”

Leave it under the second block“if...val2..then”block and change 0 into 40.

Go to“Neopixel”to move block“strip show color red”under block“car RunForward
speed: 40%”

Change red into green.

![](media/fa9223963016d5146a22839b00c10c3a.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Replicate code“val2=70”once and leave it into box behind“else if...then”,

Change 70 into 68

![](media/f5af53afb79ec3c810718e10b162d976.png)

1.  Click “K_Bit” to drag “LeftSide motor run Forward speed: 0%” block under the
    first“else if ....then”block. And alter 0 into 15

Duplicate“LeftSide motor run Forward speed: 15%”once and alter LeftSide into
RightSide and 15 into 35.

Drag“strip show color red”block under the block“RightSide motor run Forward
speed: 35%”

Change red into blue.

![](media/a5182edcb8d144b0680342918f6b5ab5.png)

1.  Replicate“val2=68”block and code string
    ![](media/d76a09ec9f4f5e49b2e396ecabce16b5.png)

Then edit the code string as follows:

![](media/eff4e19c44400b94514ba757dd0bd48f.png)

1.  Copy“val2=67”again and keep it into the third box behind“else
    if....then”block

Change 67 into 21.

Replicate code string ![](media/43b2aef41ec02053ae4085c29f49e75b.png)and place
it under the third“else if....then” block.

Change RunForward into RunBack and green into purple

![](media/b82b5050847d10db9a5525c8aaf62abf.png)

1.  Then replicate“val2=21”once and“strip show color purple”block again

Change 21 into 64 and purple into red

Click“K_Bit”to move out block“car stop”

Edit the code string as follows:

![](media/89afe18ade1d93ac781eed30b1a1f35b.png)

Complete Program：

![](media/d805392a824ef7c693acadda6303f67a.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/fe424070e0bb3045800f26124f480216.png)

1.  **Test Result：**

Download code to micro:bit board, and turn on the switch at the back of
micro:bit car.

Make IR remote control point at micro:bit and press the button to control smart
car to move.

![](media/d55474f3fdf94e5d35de424c0135f554.png)button makes smart car move
forward，![](media/5c8a65498c17f35878adf79ba446a7c8.png)stands for turning
left，![](media/41116032870ebaa49d6e78fe2445da36.png)implies rightward turning
，![](media/369433f6b13252c1df8c30b3f71028d2.png)indicates moving
backward，![](media/a8ef4b174911d528e2dc232c2f862b7d.png)control smart car to
stop，and 18 RGB lights of KEYES-2812-18R module light up the corresponding
color.

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

Note: the distance between IR remote control and IR receiving head of smart car
are supposed less than 5m, during the test.

### 22: Bluetooth Multi-purpose Smart Car

22.1: Read Bluetooth Data

1.  **Description：**

![](media/55b2424d88ba1ba8a711c49418ca8dc6.png)

In this lesson, we will control smart car to perform different functions by
Bluetooth of micro:bit board. We provide you with an App.

Let’s know its interface and function of every icon first

**2. What You Need**

1.  Insert micro:bit board into slot of V2 shield.

2.  Place batteries into battery holder.

3.  Plug smart car in power

4.  Link with computer by USB cable and enter online micro:bit editor

5.  Import Hex profile[**(How to import?)** ](#_7.6.导入代码), or click“New
    Project”and drag blocks step by step(add k-bit and Bluetooth extension
    library first)

[**(How to add k-bit extension?)**](#M11)

As the Bluetooth and extension radio can’t work together, their extension
libraries are not compatible.

Therefore, remove extension(s) and add bluetooth please if you see the following
prompt box pop up.

![](media/aee56e76bad3421a20cea6018ccd5e2c.png)

**3. Test Code：**

Import hex file

| File Type | Route                                                                                | File Name                        |
|-----------|--------------------------------------------------------------------------------------|----------------------------------|
| Hex file  | ../Makecode Code/6.22：Bluetooth Multi-purpose Smart Car/6.22.1：Read Bluetooth Data | microbit-Read Bluetooth Data.hex |

Or you could edit code step by step in the editing area.

1.  Enter“Advanced” →“Serial” → “serial redirect to USB”

Place it into“on start”

![](media/73b63660eb8f378dea4930f354d04de6.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Bluetooth”→“on bluetooth connected”

Go to“Basic”to move“show icon”block into“on bluetooth connected” block.

![](media/501b8068bafd00adcf138a2b828835d9.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Variables”→“Make a Variable...”→“New variable name：”dialog box.

Input“connected” and click “OK” to create variable“connected”.

Drag“set connected to 0” under block “show icon” and change 0 into 1.

![](media/bc9514b04f4aae40dc295eeac3fb21ce.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Loops”to move block“while true do...”into“on bluetooth
    connected”block.

Enter“Logic”to drag out “=”block.

Click“Variables” to drag “connected” into left box of “=” block and change 0
into 1.

![](media/665a62b4895ca45f82d3ebc88e885bce.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Then we generate variable“rec_data”in same way.

Then drag out“set rec_data to 0”and place it into block“while connected=1
do...”block.

Click“Bluetooth” →“more” →“bluetooth uart read until new line( )”

Keep it into 0 box and click triangle button to select \#.

![](media/e993122756294214c561f660c3df07ea.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Go to“Advanced”→“Serial”→“serial write string”

Move it below“set rec_data...until\#” block

And combine variable“rec_data”with“serial write string”block.

![](media/6effc725f7d85e4a72afbcee102cc478.png)

1.  Click“Advanced” →“Serial” →“serial write line” and edit code string as
    follows:

![](media/5d66f2053f858d7a3f2e0af55bcc0f0f.png)

1.  Go to“Bluetooth”→“on bluetooth disconnected”

Copy“show icon”block and keep it into block“on bluetooth disconnected”

Click triangle button to
select“![](media/25e0341e063286ff7828c15f09ae0ade.png)”pattern.

![](media/689000dc16e8fb32f0d9918445aae4c1.png)

Complete Program

![](media/25e0341e063286ff7828c15f09ae0ade.png)

pattern
Click“JavaScript" to view the corresponding JavaScript code:

![](media/9788392c7425654ae6484d8f60c38572.png)

**5. Test Result：**

If you drag blocks step by step, you need to set as follows after finishing test
code.

Click
![](media/09767d5efdc8f05fdb331b5ae6d352b5.png)

However, you could skip this step if you directly import test code.

After setting, download code to micro:bit board, don’t plug off USB cable([How
to download?](#A01) [How to quick download?](#_7.3.快速下载))

Next to download App.

IOS system

a. Open App Store

![](media/27924fdb3d67692df7c63d8d0fb72287.png)

b. Search keyes Bit Car and
click“![](media/962a57f92b78eea1f0e3e81463497a9c.png)”icon to download keyes Bit
Car

![](media/bb0985bc4d079475e1175b4b16d10b0e.png)

c. After the download, tap“OK”when a dialog box appears up.

![](media/6c97d9ffcde0d66cb36a017a413ce0a3.png)
![](media/a5c05f7b5844e11a8ea7a4b96df244de.png)

d. Enable Bluetooth of cellphone or iPad.

Click“connect”button to search Bluetooth.

Then select“BCC micro:bit”to connect Bluetooth.

Android system

Scan the QR code and enter website to download keyes_Bit_Car.apk

![](media/8fb53bd64d7d181ae9d24113419ac600.png)
![](media/e476860c0f534b0d9675649f02ec4d3b.png)
![](media/7566b3df9a230bc3f69993ad2d41fb85.png)

Then click“Always allow”and tap“install”

![](media/638d0a4ae5f55ca39bff4f20a3bd14a6.png)
![](media/1b0ad4f8146ca600fd2670f1266b44ef.png)

e. Tap“Open”or click“keyes Bit Car”icon to enter app.

A dialog box appears, then click“Allow”to turn on Bluetooth.

You also enable Bluetooth firstly.

![](media/c818fd71d6872374fbe177f082207fac.png)
![](media/3dab73f0e830bb5c0348af86110f3e50.png)

f. Click“CONNECT”to search and link with Bluetooth

Open CoolTerm and click Options to select SerialPort. Set COM port and 115200
baud rate(the baud rate of USB serial communication of Micro:bit is 115200
through the test). Click“OK”and“Connect”.

Point at micro:bit board and press the icons on APP, the corresponding
characters are shown on CoolTerm monitor.

![](media/3692e0ea2df357e30b51c6c83b0412f0.png)

![](media/6c1919fed6577bcf80a3564ee01e0207.png)

Through the test, we get the function of every icon, as shown below:

![](media/8773155fbc44d64b3228035100854f1f.png)

![](media/6adcb6eea0c7fbc54347e0becb0f87bf.jpeg)

![](media/0c87c59dddb6ea7a2d8d1d5155d71f0b.png)

![](media/5b942e52b28749e7d4ac904627442500.png)

22.2: Multi-purpose Smart Car

1.  **Description：**

![](media/4eefb8e31e769d24fb74ed2e4a682e9f.jpeg)

In this lesson, we will control the smart car to perform multipurpose function.

**2. What You Need**

1.  Insert micro:bit board into slot of V2 shield.

2.  Place batteries into battery holder.

3.  Plug smart car in power

4.  Link with computer by USB cable and enter online micro:bit editor

5.  Import Hex profile [**(How to import?)** ](#_7.6.导入代码), or click“New
    Project”and drag blocks step by step(add k-bit and Bluetooth extension
    library first)

[**(How to add k-bit extension?)**](#M11)

As the Bluetooth and extension radio can’t work together, their extension
libraries are not compatible.

Therefore, remove extension(s) and add bluetooth please if you see the following
prompt box pop up.

![](media/aee56e76bad3421a20cea6018ccd5e2c.png)

**3. Test Code：**

| File Type | Route                                                                                    | File Name                            |
|-----------|------------------------------------------------------------------------------------------|--------------------------------------|
| Hex file  | ../Makecode Code/6.22: Bluetooth Multi-purpose Smart Car/6.22.2：Multi-purpose Smart Car | microbit-Multi-purpose Smart Car.hex |

We don’t list the detailed steps to design code due to the whole program is
complex. You could drag file or drag blocks to finish.

Complete Program

![](media/6abea62763ef4241dc8338183857b2ba.png)

![](media/6a897fc1cd59e369598350d8f19dd396.png)

![](media/39c2dd12f55db62def5c4d692082a5f6.png)

![](media/552f52b3652055efa7ced86e2c2d8db9.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/c5db111b518abd3f2786b50f4d53f24b.png)

![](media/368c23bc4ea44c0c8453ca1bacff6bdd.png)

![](media/03db7155aa0c1f6ef8ae2202a4add0e3.png)

![](media/37838fc783417778322a057004d9fbf8.png)

![](media/6756aa5fb96faa96584b08852d847e28.png)

![](media/1035f09050b0b76a168fe1d9df6353a1.png)

1.  **Test Result：**

We will control micro:bit smart car to move via app.

Enter Makecode online editor→Projecting
Settings→![](media/bef5b73422672f316f211a959bcdfa60.png), enable “No
Pairing....”(you could skip this step if you import test code directly)

Download code and turn on the switch at the back of micro:bit car. Then control
smart car via “keyes Bit Car”app

([How to download?](#A01) [How to quick download?](#_7.3.快速下载))

##  Resources

Download test code, driver:

<https://fs.keyestudio.com/KS0426>

Wiki page: <https://wiki.keyestudio.com/Main_Page>

Official website: <https://keyestudio.com/>
